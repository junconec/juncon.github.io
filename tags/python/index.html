<!DOCTYPE html>
<script src="/js/src/clicklove.js"></script>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
<title>标签: python - JUNCON个人博客</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta property="og:type" content="website">
<meta property="og:title" content="JUNCON个人博客">
<meta property="og:url" content="http://yoursite.com/tags/python/index.html">
<meta property="og:site_name" content="JUNCON个人博客">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/og_image.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JUNCON个人博客">
<meta name="twitter:image" content="http://yoursite.com/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="JUNCON个人博客" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">主页</a>
                
                <a class="navbar-item" href="/archives">归档</a>
                
                <a class="navbar-item" href="/tags">标签</a>
                
                <a class="navbar-item" href="/about">支持</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/junconec/juncon.github.io">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/tags">标签</a></li>
            <li class="is-active"><a href="#" aria-current="page">python</a></li>
        </ul>
        </nav>
    </div>
</div>

    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-08-26T00:14:55.000Z">2019-08-26</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/smscode/">smscode</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/smscode/sendemail/">sendemail</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 分钟 读完 (大约 842 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/08/26/短信服务与邮件服务/">短信服务与邮件服务</a>
            
        </h1>
        <div class="content">
            <p>短信和邮件是开发过程中必不可少的工具</p>
<p>短信服务</p>
<p>短信服务常用于通知提醒、验证码、营销推广、服务器报警、短信轰炸机等。。。</p>
<p>短信服务需要借助第三方服务商来完成，不同的服务商，短信到达率是不一样的，这里使用云片来完成短信服务</p>
<p>邮件服务  使用自带的邮件服务即可</p>
<p><strong>发送短信</strong>    </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#https://www.yunpian.com/api/sms.html#c8   api说明</span></span><br><span class="line"><span class="comment">#https://www.yunpian.com/dashboard/domestic/register#!/domestic/register/tpl 模板签名</span></span><br><span class="line"><span class="comment">#账号13811928431  密码zc85011</span></span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> quote</span><br><span class="line"><span class="comment">#短信模板【xxx】#name#您好 现在室外温度:#wendu# 室外湿度:#shidu#</span></span><br><span class="line"><span class="comment">#参数说明  name 发送短信模板的姓名 wendu 温度  shidu 湿度  iphone 电话号码</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendMsg</span><span class="params">(name,wendu,shidu,iphone)</span>:</span></span><br><span class="line"><span class="comment">#验证码模板</span></span><br><span class="line"><span class="comment">#test_data = &#123;'apikey':'de83447f8d0f16bff95a2c151803addf','mobile':'13811928431','text':'【xxx】您的验证码是1234'&#125;</span></span><br><span class="line"><span class="comment">#quote 是转换urlencode字符串的</span></span><br><span class="line">    tplvalue = quote(<span class="string">"#name#"</span>) + <span class="string">"="</span> + quote(name) + <span class="string">"&amp;"</span> + quote(<span class="string">"#wendu#"</span>) + <span class="string">"="</span> + quote(wendu)+<span class="string">"&amp;"</span> + quote(<span class="string">"#shidu#"</span>) + <span class="string">"="</span> + quote(shidu);</span><br><span class="line">    <span class="comment">#'tpl_id':'2138996'固定的</span></span><br><span class="line">    test_data = &#123;<span class="string">'apikey'</span>:<span class="string">'de83447f8d0f16bff95a2c151803addf'</span>,<span class="string">'mobile'</span>:iphone,<span class="string">'tpl_id'</span>:<span class="string">'2138996'</span>,<span class="string">'tpl_value'</span>:tplvalue&#125;</span><br><span class="line">    test_data_urlencode = urllib.urlencode(test_data)</span><br><span class="line">    requrl = <span class="string">"https://sms.yunpian.com/v1/sms/tpl_send.json"</span></span><br><span class="line">    req = urllib2.Request(url = requrl,data =test_data_urlencode)</span><br><span class="line">    <span class="keyword">print</span> req</span><br><span class="line">    res_data = urllib2.urlopen(req)</span><br><span class="line">    res = res_data.read()</span><br><span class="line">    <span class="keyword">print</span> res</span><br><span class="line">    <span class="comment">#https://www.yunpian.com/api/sms.html</span></span><br><span class="line"><span class="comment">#调用</span></span><br><span class="line">sendMsg(<span class="string">'张同学'</span>,<span class="string">'34'</span>,<span class="string">'12'</span>,<span class="string">'138119283'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>邮件服务</strong>    </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"><span class="comment"># 第三方 SMTP 服务</span></span><br><span class="line"><span class="keyword">from</span> email.utils <span class="keyword">import</span> formataddr</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendMessage</span><span class="params">(subject,content)</span>:</span></span><br><span class="line">    mail_host = <span class="string">"smtp.itcast.cn"</span>  <span class="comment"># 设置服务器</span></span><br><span class="line">    mail_user = <span class="string">"zhangcheng@itcast.cn"</span>  <span class="comment"># 用户名</span></span><br><span class="line">    mail_pass = <span class="string">"z850311"</span>  <span class="comment"># 口令</span></span><br><span class="line">    sender = <span class="string">'z@163.com'</span><span class="comment">#好像什么都行</span></span><br><span class="line">    receivers = [<span class="string">'z@163.com'</span>]  <span class="comment"># 接收邮件，可设置为你的QQ邮箱或者其他邮箱</span></span><br><span class="line">    <span class="comment">#组装数据</span></span><br><span class="line">    str= <span class="string">'大家好\n我是逗比机器人，在群里有人@了我们，提出了问题'</span></span><br><span class="line">    message = MIMEText(str, <span class="string">'plain'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line">    message[<span class="string">'From'</span>] = formataddr([<span class="string">"MyQQRot"</span>, <span class="string">"zz@163.com"</span>])</span><br><span class="line">    <span class="comment">#拼接多人</span></span><br><span class="line">    message[<span class="string">'To'</span>] = <span class="string">','</span>.join(receivers)</span><br><span class="line">    message[<span class="string">'Subject'</span>] = Header(subject, <span class="string">'utf-8'</span>)</span><br><span class="line">    smtpObj = smtplib.SMTP()</span><br><span class="line">    smtpObj.connect(mail_host, <span class="number">25</span>)  <span class="comment"># 25 为 SMTP 端口号</span></span><br><span class="line">    smtpObj.login(mail_user, mail_pass)</span><br><span class="line">    smtpObj.sendmail(sender, receivers, message.as_string())</span><br><span class="line">    print(<span class="string">"邮件发送成功"</span>)</span><br></pre></td></tr></table></figure>

<p><strong>发送邮件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sendMessage(&apos;邮件主题&apos;,&apos;邮件测试&apos;)</span><br></pre></td></tr></table></figure>

<p><strong>邮件服务</strong>    2（3行代码搞定）</p>
<p>话不多说上来先看一下代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> yagmail</span><br><span class="line">yag = yagmail.SMTP(user=<span class="string">'user@163.com'</span>,password=<span class="string">'1234'</span>,host=<span class="string">'smtp.163.com'</span>) <span class="comment">#注意这个password是你授权密码</span></span><br><span class="line">contents = [<span class="string">'这里是内容'</span>]</span><br><span class="line">yag.send(<span class="string">'target@qq.com'</span>,<span class="string">'主题：这是一个主题'</span>,contents)</span><br></pre></td></tr></table></figure>

<p><strong>yagmail.SMTP()参数</strong></p>
<p>yagmail.SMTP()里面的几个重要参数！user和password顾名思义啦，就是你自己的邮箱账号和密码<br>但是这个问题就来了，我们平时登陆邮箱一般账号密码登陆有些时候好像是要打验证码的呀，这样python就传了个账号和密码真的能把邮件发出去吗？然鹅此密码非彼密码，用的密码是邮箱中的授权码，就是专门授权给机器登陆的密码。一般邮箱中，进入设置，然后POP3/SMTP/IMAP设置，打开服务就可以设置授权码了。</p>
<p>send（）参数</p>
<p><img src="/Users/juncone/Desktop/Snip20191005_22.png" alt="nip20191005_2"></p>
<p>args.to 是收件人邮箱（给多个目标发邮件只需创建一个列表，将邮箱放在列表中即可）</p>
<p>args.subject 是主题</p>
<p>args.contents 是邮箱正文</p>
<p>args.attachments 是附件(传入文件路径)</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-08-26T00:10:31.000Z">2019-08-26</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/python/">python</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 分钟 读完 (大约 391 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/08/26/python源码解释过程/">python源码解释过程</a>
            
        </h1>
        <div class="content">
            <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">首先你可以观察一下程序的运行过程，具体步骤如下：</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、编写py文件 A</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、在编写一个py文件 B</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、在A中<span class="keyword">import</span> B</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、运行py文件A</span><br><span class="line"></span><br><span class="line">结果：</span><br><span class="line"></span><br><span class="line">在运行py文件A的时候，会产生一个B的pyc文件，加速装载，但是A在每次使用的时候，由于只装载一次，所以没有pyc</span><br><span class="line"></span><br><span class="line">以上是对<span class="keyword">import</span>解释</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">整体过程解释</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>Python先把代码（.py文件）编译成字节码，交给字节码虚拟机，然后虚拟机一条一条执行字节码指令，从而完成程序的执行。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 字节码</span><br><span class="line"></span><br><span class="line">字节码在Python虚拟机程序里对应的是PyCodeObject对象。</span><br><span class="line"></span><br><span class="line">.pyc文件是字节码在磁盘上的表现形式。</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> pyc文件</span><br><span class="line"></span><br><span class="line">PyCodeObject对象的创建时机是模块加载的时候，即<span class="keyword">import</span>。</span><br><span class="line"></span><br><span class="line">Python test.py会对test.py进行编译成字节码并解释执行，但是不会生成test.pyc。</span><br><span class="line"></span><br><span class="line">如果test.py加载了其他模块，如<span class="keyword">import</span> util，Python会对util.py进行编译成字节码，生成util.pyc，然后对字节码解释执行。</span><br><span class="line"></span><br><span class="line">如果想生成test.pyc，我们可以使用Python内置模块py_compile来编译。</span><br><span class="line"></span><br><span class="line">加载模块时，如果同时存在.py和.pyc，Python会尝试使用.pyc，如果.pyc的编译时间早于.py的修改时间，则重新编译.py并更新.pyc。</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-12-03T07:18:57.000Z">2018-12-03</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Selenium/">Selenium</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Selenium/爬虫-selenium/">爬虫+selenium</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 分钟 读完 (大约 935 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/12/03/selenium安装与使用/">爬虫+selenium</a>
            
        </h1>
        <div class="content">
            <p>爬虫使用selenium进行爬取，借助chrome进行调试，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install selenium</span><br></pre></td></tr></table></figure>

<p>代码测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver browser = webdriver.Chrome()browser.get(&apos;http://www.baidu.com/&apos;)</span><br></pre></td></tr></table></figure>

<p>你会欣喜若狂的运行一下，如果你是初次使用，会报错，需要下载一个webdriver的文件，这个文件要放在chrome浏览器下，最坑的是这个文件需要对应你的浏览器版本才可以</p>
<p>可以访问以下地址查看对应</p>
<p><a href="https://blog.csdn.net/huilan_same/article/details/51896672" target="_blank" rel="noopener">https://blog.csdn.net/huilan_same/article/details/51896672</a></p>
<p>1、windows下找chrome的安装位置</p>
<p>2、mac下找chrome.app</p>
<p>右键显示包内容,实际上这个文件<a href="http://47.93.248.15/wp-content/uploads/2018/05/chromedriver.zip" target="_blank" rel="noopener">chromedriver</a> 在最新的mac上，需要在/usr/local/bin下也弄一份同样的文件，这样还不够，还需要赋值权限chmod 777 /xxxx/xxxx/xxx/chromedriver才可以</p>
<p>3、linux下找到安装位置</p>
<p>以下是对应的chrome的工具，需要根据版本选择对应的工具</p>
<p><a href="http://chromedriver.storage.googleapis.com/index.html" target="_blank" rel="noopener">http://chromedriver.storage.googleapis.com/index.html</a></p>
<p>版本编号从2.0-2.38之间，截稿前最新版本是2.33,但是需要注意不是最新的就是能用的，要找到你对应，怎么找对应的</p>
<p>点击每个版本里面，都有一个notes.txt</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">----------ChromeDriver v2<span class="number">.38</span> (<span class="number">2018</span><span class="number">-04</span><span class="number">-17</span>)----------</span><br><span class="line">Supports Chrome v65<span class="number">-67</span></span><br><span class="line">----------ChromeDriver v2<span class="number">.37</span> (<span class="number">2018</span><span class="number">-03</span><span class="number">-16</span>)----------</span><br><span class="line">Supports Chrome v64<span class="number">-66</span></span><br><span class="line">----------ChromeDriver v2<span class="number">.36</span> (<span class="number">2018</span><span class="number">-03</span><span class="number">-02</span>)----------</span><br><span class="line">Supports Chrome v63<span class="number">-65</span></span><br></pre></td></tr></table></figure>

<p>那个Supports Chrome v65-67就是对应的Chrome的版本，比如你的Chrome版本是64版本，就一定要使用2.37版本或者2.36版本，不可以使用2.38版本</p>
<p>下载后，把下载的文件放入到chrome安装路径下即可(Mac需要在应用程序上右键显示包内容下)</p>
<p>最后运行你的程序即可，就可以不报错了</p>
<p>最后奉上老司机福利，能不能看懂就看你自己了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"> </span><br><span class="line">xp_href = <span class="string">"//div[@class='item']//a/@href|//div[@class='item ']//a/@href"</span></span><br><span class="line">xp_video_reg = <span class="string">"//video/@src"</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpiderYellow</span><span class="params">(object)</span>:</span></span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="comment">#创建保存文件夹</span></span><br><span class="line">    self.downloadDir = <span class="string">"./movies"</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(self.downloadDir)==<span class="literal">False</span>:</span><br><span class="line">    os.mkdir(self.downloadDir)</span><br><span class="line">    <span class="comment">#保存此次下载的文件信息</span></span><br><span class="line">    self.downloadInfo = &#123;&#125;</span><br><span class="line">    <span class="comment">#想爬取的个数</span></span><br><span class="line">    self.max_count = <span class="number">0</span></span><br><span class="line">    <span class="comment">#发现的连接名称</span></span><br><span class="line">    self.setHref= set([])</span><br><span class="line">    <span class="comment">#下载的队列</span></span><br><span class="line">    self.htmlQueue = []</span><br><span class="line">    <span class="comment">#从连接中获得的视频</span></span><br><span class="line">    self.setUrl = set([])</span><br><span class="line">    <span class="comment">#谷歌chromeDriver设置请求头 ，并打开无界面浏览器加载动态js网页</span></span><br><span class="line">    chrome_options = Options()</span><br><span class="line">    chrome_options.add_argument(<span class="string">'--headless'</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">'--disable-gpu'</span>)</span><br><span class="line">    chrome_options.add_argument(</span><br><span class="line">    <span class="string">'User-Agent="Mozilla/5.0 (iPod; U; CPU iPhone OS 2_1 like Mac OS X; ja-jp) AppleWebKit/525.18.1 (KHTML, like Gecko) Version/3.1.1 Mobile/5F137 Safari/525.20"'</span>)</span><br><span class="line">    self.driver = webdriver.Chrome(chrome_options=chrome_options)</span><br><span class="line">    <span class="comment">#设置requests请求头</span></span><br><span class="line">    self.headers = &#123;<span class="string">"User-Agent"</span>:<span class="string">"Mozilla/5.0 (iPod; U; CPU iPhone OS 2_1 like Mac OS X; ja-jp) AppleWebKit/525.18.1 (KHTML, like Gecko) Version/3.1.1 Mobile/5F137 Safari/525.20"</span>&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#保存的视频信息</span></span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">save_video</span><span class="params">(self,src)</span>:</span></span><br><span class="line">   print(<span class="string">"saving... ==&gt;"</span>,src)</span><br><span class="line">   self.setUrl.add(src)</span><br><span class="line"> </span><br><span class="line">   <span class="comment">#从第一个界面中获得视频链接地址</span></span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">find_videoInfo</span><span class="params">(self)</span>:</span></span><br><span class="line">   <span class="keyword">while</span> len(self.setUrl) &lt; self.max_count:</span><br><span class="line">       url = self.htmlQueue.pop()</span><br><span class="line">       <span class="keyword">if</span> url:</span><br><span class="line">            print(<span class="string">'analysis:'</span>, url)</span><br><span class="line">            html = self.downloadHtml(url)</span><br><span class="line">            self.analysisHtml(html)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">downloadHtml</span><span class="params">(self,url)</span>:</span></span><br><span class="line">       self.driver.get(url)</span><br><span class="line">       <span class="keyword">return</span> self.driver.page_source</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">analysisHtml</span><span class="params">(self,html)</span>:</span></span><br><span class="line">     tree = etree.HTML(html)</span><br><span class="line">     <span class="comment"># 查找视频信息</span></span><br><span class="line">     videoInfo = tree.xpath(xp_video_reg)</span><br><span class="line">     <span class="comment"># 保存视频信息</span></span><br><span class="line">     <span class="keyword">for</span> video <span class="keyword">in</span> videoInfo:</span><br><span class="line">        self.save_video(video)</span><br><span class="line">     <span class="comment"># 查找新的非重复本域名标签</span></span><br><span class="line">     hrefInfo = tree.xpath(xp_href)</span><br><span class="line">     <span class="keyword">for</span> href <span class="keyword">in</span> hrefInfo:</span><br><span class="line">         href = urllib.parse.urljoin(self.seedurl, href)</span><br><span class="line">         <span class="keyword">if</span> href <span class="keyword">not</span> <span class="keyword">in</span> self.setHref:</span><br><span class="line">             self.setHref.add(href)</span><br><span class="line">             self.htmlQueue.append(href)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_video_src</span><span class="params">(self,url)</span>:</span></span><br><span class="line"> </span><br><span class="line">     <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_download</span><span class="params">(self,url)</span>:</span></span><br><span class="line">    print(<span class="string">"start write to file"</span>,url)</span><br><span class="line">    r = requests.get(url,headers=self.headers,stream= <span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">with</span> open(os.path.join(self.downloadDir,url.split(<span class="string">'/'</span>)[<span class="number">-2</span>]),<span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">         <span class="keyword">for</span> chunk <span class="keyword">in</span> r.iter_content(chunk_size=<span class="number">1024</span>):</span><br><span class="line">              f.write(chunk)</span><br><span class="line">    print(<span class="string">"download success"</span>,url)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mutiDownload</span><span class="params">(self,urls)</span>:</span></span><br><span class="line">    pool = multiprocessing.Pool(<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        pool.apply_async(self._download(url))</span><br><span class="line">    pool.close()</span><br><span class="line">    pool.join()</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start</span><span class="params">(self,seed_url,maxCount)</span>:</span></span><br><span class="line">    self.seedurl = seed_url</span><br><span class="line">    self.max_count = maxCount</span><br><span class="line">    self.htmlQueue.append(seed_url)</span><br><span class="line">    self.find_videoInfo()</span><br><span class="line">    self.mutiDownload(self.setUrl)</span><br><span class="line">s = SpiderYellow()</span><br><span class="line">s.start(<span class="string">"http://dyz44.com/latest-updates/"</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-10-21T14:47:19.000Z">2018-10-21</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/python/">python</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    17 分钟 读完 (大约 2584 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/10/21/python内置函数整理/">python内置函数整理</a>
            
        </h1>
        <div class="content">
            <p>内置函数就是python给你提供的, 拿来直接用的函数，比如print.，input等。<strong>截止到python版本3.6.2 python一共提供了68个内置函数。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#68个内置函数# abs()         　　dict()      　　help()       　　min()       　　setattr()# all()         　　dir()       　　hex()        　　next()      　　slice() # any()         　　divmod()    　　id()         　　object()    　　sorted() # ascii()       　　enumerate() 　　input()      　　oct()       　　staticmethod() # bin()         　　eval()      　　int()        　　open()      　　str() # bool()        　　exec()      　　isinstance() 　　ord()       　　sum() # bytearray()   　　ﬁlter()     　　issubclass() 　　pow()       　　super() # bytes()       　　ﬂoat()      　　iter()       　　print()     　　tuple() # callable()    　　format()    　　len()        　　property()  　　type() # chr()         　　frozenset() 　　list()       　　range()     　　vars() # classmethod() 　　getattr()   　　locals()     　　repr()      　　zip() # compile()     　　globals()   　　map()        　　reversed()  　　__import__() # complex()     　　hasattr()   　　max()        　　round() # delattr()     　　hash()      　　memoryview() 　　set()</span><br></pre></td></tr></table></figure>

<p><strong>和数字相关</strong></p>
<p><strong>1. 数据类型</strong></p>
<ul>
<li>bool : 布尔型(True,False)</li>
<li>int : 整型(整数)</li>
<li>float : 浮点型(小数)</li>
<li>complex : 复数</li>
</ul>
<p><strong>2. 进制转换</strong></p>
<ul>
<li>bin() 将给的参数转换成二进制</li>
<li>otc() 将给的参数转换成八进制</li>
<li>hex() 将给的参数转换成十六进制</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(bin(10))  # 二进制:0b1010print(hex(10))  # 十六进制:0xaprint(oct(10))  # 八进制:0o12</span><br></pre></td></tr></table></figure>

<p><strong>3. 数学运算</strong></p>
<ul>
<li>abs() 返回绝对值</li>
<li>divmode() 返回商和余数</li>
<li>round() 四舍五入</li>
<li>pow(a, b) 求a的b次幂, 如果有三个参数. 则求完次幂后对第三个数取余</li>
<li>sum() 求和</li>
<li>min() 求最小值</li>
<li>max() 求最大值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(abs(-2))  # 绝对值:2print(divmod(20,3)) # 求商和余数:(6,2)print(round(4.50))   # 五舍六入:4print(round(4.51))   #5print(pow(10,2,3))  # 如果给了第三个参数. 表示最后取余:1print(sum([1,2,3,4,5,6,7,8,9,10]))  # 求和:55print(min(5,3,9,12,7,2))  #求最小值:2print(max(7,3,15,9,4,13))  #求最大值:15</span><br></pre></td></tr></table></figure>

<p><strong>和数据结构相关</strong></p>
<p><strong>1. 序列</strong></p>
<p>（1）列表和元组</p>
<ul>
<li>list() 将一个可迭代对象转换成列表</li>
<li>tuple() 将一个可迭代对象转换成元组</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(list((1,2,3,4,5,6)))  #[1, 2, 3, 4, 5, 6]print(tuple([1,2,3,4,5,6]))  #(1, 2, 3, 4, 5, 6)</span><br></pre></td></tr></table></figure>

<p>（2）相关内置函数</p>
<ul>
<li>reversed() 将一个序列翻转, 返回翻转序列的迭代器</li>
<li>slice() 列表的切片</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lst = &quot;你好啊&quot;it = reversed(lst)   # 不会改变原列表. 返回一个迭代器, 设计上的一个规则print(list(it))  #[&apos;啊&apos;, &apos;好&apos;, &apos;你&apos;]lst = [1, 2, 3, 4, 5, 6, 7]print(lst[1:3:1])  #[2,3]s = slice(1, 3, 1)  #  切片用的print(lst[s])  #[2,3]</span><br></pre></td></tr></table></figure>

<p>（3）字符串</p>
<ul>
<li>str() 将数据转化成字符串</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(str(123)+&apos;456&apos;)  #123456　　format()     与具体数据相关, 用于计算各种小数, 精算等.</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s = &quot;hello world!&quot;print(format(s, &quot;^20&quot;))  #剧中print(format(s, &quot;&lt;20&quot;))  #左对齐print(format(s, &quot;&gt;20&quot;))  #右对齐#     hello world!    # hello world!        #         hello world!print(format(3, &apos;b&apos; ))    # 二进制:11print(format(97, &apos;c&apos; ))   # 转换成unicode字符:aprint(format(11, &apos;d&apos; ))   # ⼗进制:11print(format(11, &apos;o&apos; ))   # 八进制:13 print(format(11, &apos;x&apos; ))   # 十六进制(⼩写字母):bprint(format(11, &apos;X&apos; ))   # 十六进制(大写字母):Bprint(format(11, &apos;n&apos; ))   # 和d⼀样:11print(format(11))         # 和d⼀样:11print(format(123456789, &apos;e&apos; ))      # 科学计数法. 默认保留6位小数:1.234568e+08print(format(123456789, &apos;0.2e&apos; ))   # 科学计数法. 保留2位小数(小写):1.23e+08print(format(123456789, &apos;0.2E&apos; ))   # 科学计数法. 保留2位小数(大写):1.23E+08print(format(1.23456789, &apos;f&apos; ))     # 小数点计数法. 保留6位小数:1.234568print(format(1.23456789, &apos;0.2f&apos; ))  # 小数点计数法. 保留2位小数:1.23print(format(1.23456789, &apos;0.10f&apos;))  # 小数点计数法. 保留10位小数:1.2345678900print(format(1.23456789e+3, &apos;F&apos;))   # 小数点计数法. 很大的时候输出INF:1234.567890</span><br></pre></td></tr></table></figure>

<ul>
<li>bytes() 把字符串转化成bytes类型</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bs = bytes(&quot;今天吃饭了吗&quot;, encoding=&quot;utf-8&quot;)print(bs)  #b&apos;\xe4\xbb\x8a\xe5\xa4\xa9\xe5\x90\x83\xe9\xa5\xad\xe4\xba\x86\xe5\x90\x97&apos;　　 bytearray()    返回一个新字节数组. 这个数字的元素是可变的, 并且每个元素的值得范围是[0,256)ret = bytearray(&quot;alex&quot; ,encoding =&apos;utf-8&apos;)print(ret[0])  #97print(ret)  #bytearray(b&apos;alex&apos;)ret[0] = 65  #把65的位置A赋值给ret[0]print(str(ret))  #bytearray(b&apos;Alex&apos;)</span><br></pre></td></tr></table></figure>

<ul>
<li>ord() 输入字符找带字符编码的位置</li>
<li>chr() 输入位置数字找出对应的字符</li>
<li>ascii() 是ascii码中的返回该值 不是就返回u</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(ord(&apos;a&apos;))  # 字母a在编码表中的码位:97print(ord(&apos;中&apos;))  # &apos;中&apos;字在编码表中的位置:20013print(chr(65))  # 已知码位,求字符是什么:Aprint(chr(19999))  #丟for i in range(65536):  #打印出0到65535的字符    print(chr(i), end=&quot; &quot;)print(ascii(&quot;@&quot;))  #&apos;@&apos;</span><br></pre></td></tr></table></figure>

<ul>
<li>repr() 返回一个对象的string形式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s = &quot;今天\n吃了%s顿\t饭&quot; % 3print(s)#今天# 吃了3顿    饭print(repr(s))   # 原样输出,过滤掉转义字符 \n \t \r 不管百分号%#&apos;今天\n吃了3顿\t饭&apos;</span><br></pre></td></tr></table></figure>

<p><strong>2. 数据集合</strong></p>
<ul>
<li>字典：dict 创建一个字典</li>
<li>集合：set 创建一个集合</li>
</ul>
<p><strong>frozenset() 创建一个冻结的集合，冻结的集合不能进行添加和删除操作。</strong></p>
<p><strong>3. 相关内置函数</strong></p>
<ul>
<li>len() 返回一个对象中的元素的个数</li>
<li>sorted() 对可迭代对象进行排序操作 (lamda)</li>
</ul>
<p><strong>语法：sorted(Iterable, key=函数(排序规则), reverse=False)</strong></p>
<ul>
<li>Iterable: 可迭代对象</li>
<li>key: 排序规则(排序函数), 在sorted内部会将可迭代对象中的每一个元素传递给这个函数的参数. 根据函数运算的结果进行排序</li>
<li>reverse: 是否是倒叙. True: 倒叙, False: 正序</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lst = [5,7,6,12,1,13,9,18,5]lst.sort()  # sort是list里面的一个方法print(lst)  #[1, 5, 5, 6, 7, 9, 12, 13, 18]ll = sorted(lst) # 内置函数. 返回给你一个新列表  新列表是被排序的print(ll)  #[1, 5, 5, 6, 7, 9, 12, 13, 18]l2 = sorted(lst,reverse=True)  #倒序print(l2)  #[18, 13, 12, 9, 7, 6, 5, 5, 1]</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#根据字符串长度给列表排序lst = [&apos;one&apos;, &apos;two&apos;, &apos;three&apos;, &apos;four&apos;, &apos;five&apos;, &apos;six&apos;]def f(s):    return len(s)l1 = sorted(lst, key=f, )print(l1)  #[&apos;one&apos;, &apos;two&apos;, &apos;six&apos;, &apos;four&apos;, &apos;five&apos;, &apos;three&apos;]</span><br></pre></td></tr></table></figure>

<ul>
<li>enumerate() 获取集合的枚举对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lst = [&apos;one&apos;,&apos;two&apos;,&apos;three&apos;,&apos;four&apos;,&apos;five&apos;]for index, el in enumerate(lst,1):    # 把索引和元素一起获取,索引默认从0开始. 可以更改    print(index)    print(el)# 1# one# 2# two# 3# three# 4# four# 5# five</span><br></pre></td></tr></table></figure>

<ul>
<li>all() 可迭代对象中全部是True, 结果才是True</li>
<li>any() 可迭代对象中有一个是True, 结果就是True</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(all([1,&apos;hello&apos;,True,9]))  #Trueprint(any([0,0,0,False,1,&apos;good&apos;]))  #True</span><br></pre></td></tr></table></figure>

<ul>
<li>zip() 函数用于将可迭代的对象作为参数, 将对象中对应的元素打包成一个元组, 然后返回由这些元组组成的列表. 如果各个迭代器的元素个数不一致, 则返回列表长度与最短的对象相同</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lst1 = [1, 2, 3, 4, 5, 6]lst2 = [&apos;醉乡民谣&apos;, &apos;驴得水&apos;, &apos;放牛班的春天&apos;, &apos;美丽人生&apos;, &apos;辩护人&apos;, &apos;被嫌弃的松子的一生&apos;]lst3 = [&apos;美国&apos;, &apos;中国&apos;, &apos;法国&apos;, &apos;意大利&apos;, &apos;韩国&apos;, &apos;日本&apos;]print(zip(lst1, lst1, lst3))  #&lt;zip object at 0x00000256CA6C7A88&gt;for el in zip(lst1, lst2, lst3):    print(el)# (1, &apos;醉乡民谣&apos;, &apos;美国&apos;)# (2, &apos;驴得水&apos;, &apos;中国&apos;)# (3, &apos;放牛班的春天&apos;, &apos;法国&apos;)# (4, &apos;美丽人生&apos;, &apos;意大利&apos;)# (5, &apos;辩护人&apos;, &apos;韩国&apos;)# (6, &apos;被嫌弃的松子的一生&apos;, &apos;日本&apos;)</span><br></pre></td></tr></table></figure>

<ul>
<li>fiter() 过滤 (lamda)</li>
</ul>
<p><strong>语法：fiter(function. Iterable)</strong></p>
<p>function: 用来筛选的函数. 在ﬁlter中会自动的把iterable中的元素传递给function. 然后根据function返回的True或者False来判断是否保留留此项数据 , Iterable: 可迭代对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def func(i):    # 判断奇数    return i % 2 == 1    lst = [1,2,3,4,5,6,7,8,9]l1 = filter(func, lst)  #l1是迭代器print(l1)  #&lt;filter object at 0x000001CE3CA98AC8&gt;print(list(l1))  #[1, 3, 5, 7, 9]</span><br></pre></td></tr></table></figure>

<ul>
<li>map() 会根据提供的函数对指定序列列做映射(lamda)</li>
</ul>
<p><strong>语法 : map(function, iterable)</strong></p>
<p>可以对可迭代对象中的每一个元素进行映射. 分别去执行 function</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def f(i):    return ilst = [1,2,3,4,5,6,7,]it = map(f, lst) # 把可迭代对象中的每一个元素传递给前面的函数进行处理. 处理的结果会返回成迭代器print(list(it))  #[1, 2, 3, 4, 5, 6, 7]</span><br></pre></td></tr></table></figure>

<p><strong>和作用域相关</strong></p>
<ul>
<li>locals() 返回当前作用域中的名字</li>
<li>globals() 返回全局作用域中的名字</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def func():    a = 10    print(locals())  # 当前作用域中的内容    print(globals())  # 全局作用域中的内容    print(&quot;今天内容很多&quot;)func()# &#123;&apos;a&apos;: 10&#125;# &#123;&apos;__name__&apos;: &apos;__main__&apos;, &apos;__doc__&apos;: None, &apos;__package__&apos;: None, &apos;__loader__&apos;: # &lt;_frozen_importlib_external.SourceFileLoader object at 0x0000026F8D566080&gt;, # &apos;__spec__&apos;: None, &apos;__annotations__&apos;: &#123;&#125;, &apos;__builtins__&apos;: &lt;module &apos;builtins&apos; # (built-in)&gt;, &apos;__file__&apos;: &apos;D:/pycharm/练习/week03/new14.py&apos;, &apos;__cached__&apos;: None,#  &apos;func&apos;: &lt;function func at 0x0000026F8D6B97B8&gt;&#125;# 今天内容很多</span><br></pre></td></tr></table></figure>

<p><strong>和迭代器/生成器相关</strong></p>
<ul>
<li>range() 生成数据</li>
<li>next() 迭代器向下执行一次, 内部实际使⽤用了__ next__()⽅方法返回迭代器的下一个项目</li>
<li>iter() 获取迭代器, 内部实际使用的是__ iter__()⽅方法来获取迭代器</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for i in range(15,-1,-5):    print(i)# 15# 10# 5# 0lst = [1,2,3,4,5]it = iter(lst)  #  __iter__()获得迭代器print(it.__next__())  #1print(next(it)) #2  __next__()  print(next(it))  #3print(next(it))  #4</span><br></pre></td></tr></table></figure>

<p><strong>字符串类型代码的执行</strong></p>
<ul>
<li>eval() 执行字符串类型的代码. 并返回最终结果</li>
<li>exec() 执行字符串类型的代码</li>
<li>compile() 将字符串类型的代码编码. 代码对象能够通过exec语句来执行或者eval()进行求值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s1 = input(&quot;请输入a+b:&quot;)  #输入:8+9print(eval(s1))  # 17 可以动态的执行代码. 代码必须有返回值s2 = &quot;for i in range(5): print(i)&quot;a = exec(s2) # exec 执行代码不返回任何内容# 0# 1# 2# 3# 4print(a)  #None# 动态执行代码exec(&quot;&quot;&quot;def func():    print(&quot; 我是周杰伦&quot;)&quot;&quot;&quot; )func()  #我是周杰伦</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code1 = &quot;for i in range(3): print(i)&quot;com = compile(code1, &quot;&quot;, mode=&quot;exec&quot;)   # compile并不会执行你的代码.只是编译exec(com)   # 执行编译的结果# 0# 1# 2code2 = &quot;5+6+7&quot;com2 = compile(code2, &quot;&quot;, mode=&quot;eval&quot;)print(eval(com2))  # 18code3 = &quot;name = input(&apos;请输入你的名字:&apos;)&quot;  #输入:hellocom3 = compile(code3, &quot;&quot;, mode=&quot;single&quot;)exec(com3)print(name)  #hello</span><br></pre></td></tr></table></figure>

<p><strong>输入输出</strong></p>
<ul>
<li>print() : 打印输出</li>
<li>input() : 获取用户输出的内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;hello&quot;, &quot;world&quot;, sep=&quot;*&quot;, end=&quot;@&quot;) # sep:打印出的内容用什么连接,end:以什么为结尾#hello*world@</span><br></pre></td></tr></table></figure>

<p><strong>内存相关</strong></p>
<p>hash() : 获取到对象的哈希值(int, str, bool, tuple). hash算法:(1) 目的是唯一性 (2) dict 查找效率非常高, hash表.用空间换的时间 比较耗费内存</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s = &apos;alex&apos;print(hash(s))  #-168324845050430382lst = [1, 2, 3, 4, 5]print(hash(lst))  #报错,列表是不可哈希的　　id() :  获取到对象的内存地址s = &apos;alex&apos;print(id(s))  #2278345368944</span><br></pre></td></tr></table></figure>

<p><strong>文件操作相关</strong></p>
<ul>
<li>open() : 用于打开一个文件, 创建一个文件句柄</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f = open(&apos;file&apos;,mode=&apos;r&apos;,encoding=&apos;utf-8&apos;)f.read()f.close()</span><br></pre></td></tr></table></figure>

<p><strong>模块相关</strong></p>
<ul>
<li>__ import__() : 用于动态加载类和函数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 让用户输入一个要导入的模块import osname = input(&quot;请输入你要导入的模块:&quot;)__import__(name)    # 可以动态导入模块</span><br></pre></td></tr></table></figure>

<p><strong>帮 助</strong></p>
<ul>
<li>help() : 函数用于查看函数或模块用途的详细说明</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(help(str))  #查看字符串的用途</span><br></pre></td></tr></table></figure>

<p><strong>调用相关</strong></p>
<ul>
<li>callable() : 用于检查一个对象是否是可调用的. 如果返回True, object有可能调用失败, 但如果返回False. 那调用绝对不会成功</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = 10print(callable(a))  #False  变量a不能被调用#def f():    print(&quot;hello&quot;)    print(callable(f))   # True 函数是可以被调用的</span><br></pre></td></tr></table></figure>

<p><strong>查看内置属性</strong></p>
<ul>
<li>dir() : 查看对象的内置属性, 访问的是对象中的<strong>dir</strong>()方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(dir(tuple))  #查看元组的方法</span><br></pre></td></tr></table></figure>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-09-30T14:10:08.000Z">2017-09-30</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Excel/">Excel</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Excel/Excel-openpyxl-增删改查/">Excel-openpyxl-增删改查</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 分钟 读完 (大约 1031 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/09/30/Excel-openpyxl-3-增删改查/">Excel-openpyxl-3-增删改查</a>
            
        </h1>
        <div class="content">
            <h1 id="Excel-openpyxl-3-增删改查"><a href="#Excel-openpyxl-3-增删改查" class="headerlink" title="Excel-openpyxl-3-增删改查"></a>Excel-openpyxl-3-增删改查</h1><p>通过这篇文章，你能学习到以下内容<br>1、openpyxl的增加数据<br>2、openpyxl删除数据<br>3、更新数据<br>4、查找数据</p>
<p>1、openpyxl的增加数据</p>
<p>使用上一个文件创建的create_excel.xlsx</p>
<p><a href="http://47.93.248.15/wp-content/uploads/2018/05/create_excel.xlsx" target="_blank" rel="noopener">create_excel </a>     原始文件，数据源</p>
<p><a href="http://47.93.248.15/wp-content/uploads/2018/05/openpyxledit.py_.zip" target="_blank" rel="noopener">openpyxledit.py</a>   相关代码</p>
<p><img src="http://47.93.248.15/wp-content/uploads/2018/05/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2018-05-09-%E4%B8%8B%E5%8D%883.25.27.png" alt="img"></p>
<p>每次调用，在最后一列，多增加一列数据</p>
<p>引用模块openpyxl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from openpyxl import load_workbookfrom openpyxl import Workbook# 一个eggache的数字转为列字母的方法from openpyxl.utils import get_column_letter</span><br></pre></td></tr></table></figure>

<p>目标:调用一次，最后一列增加一列</p>
<p>思路:</p>
<p>获得最后一列或者一行的位置</p>
<p>增加一列:通过cell指定最后一列的位置增加1，依次对这一列的每一行赋值</p>
<p>增加一行:通过cell指定最后一行位置增加1，依次对这行的每一列进行赋值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#增加数据def addExcel():    # 打开一个工作薄    wb = load_workbook(&apos;create_excel.xlsx&apos;, data_only=True)  # data_only=True是关键，显示公式结果    # 获取一张表，需要对应那个表的name，之前取的是create_sheet    sheet = wb.get_sheet_by_name(&quot;create_sheet&quot;)    #获得最大行数    row=sheet.max_row    #获得最大列数    column=sheet.max_column    #循环插入一列数据    for i in range(row):        #列数+1转换为字母        h_col = get_column_letter(column+1)        #行数从1开始,从0会报错        xx=h_col+str(i+1)        #可以使用sheet[xx].value=xx方式进行赋值        # sheet[xx].value=xx        #row是数字，column是数字，都是从1开始        sheet.cell(row=(i+1),column=column+1).value=xx    wb.save(&quot;create_excel.xlsx&quot;)</span><br></pre></td></tr></table></figure>

<p>调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addExcel()</span><br></pre></td></tr></table></figure>



<p>2、 openpyxl删除数据</p>
<p>目标:调用一次，最后一行删除一行</p>
<p>思路：</p>
<p>openpyxl本身不提供删除，原因在于删除涉及移动数据，但是如果行或者列的数据本身都为None时候，默认这行就是没有的，利用这个规则，可以把一行或者一列的数据全部设置为None即可删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def deleteExcel():    # 打开一个工作薄    wb = load_workbook(&apos;create_excel.xlsx&apos;, data_only=True)  # data_only=True是关键，显示公式结果    # 获取一张表，需要对应那个表的name，之前取的是create_sheet    sheet = wb.get_sheet_by_name(&quot;create_sheet&quot;)    # 获得最大行数    row = sheet.max_row    # 获得最大列数    column = sheet.max_column    print(column)    # 删除最后一列数据    #for i in range(row):    #    sheet.cell(row=(i+1), column=column).value = None    # 删除最后一行数据    for i in range(column):        sheet.cell(row=row,column=i+1).value=None    wb.save(&quot;create_excel.xlsx&quot;)</span><br></pre></td></tr></table></figure>

<p>调用删除数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deleteExcel()</span><br></pre></td></tr></table></figure>



<p>3、  更新数据</p>
<p>目标:修改任意数据，进行保存</p>
<p>思路</p>
<p>基本思路和增加是一样的，但是比较简单的是不获取一列数据，而是单独的一个cell</p>
<p>对单独cell赋值后进行保存，即可完成更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def updateExcel():    # 打开一个工作薄    wb = load_workbook(&apos;create_excel.xlsx&apos;, data_only=True)  # data_only=True是关键，显示公式结果    # 获取一张表，需要对应那个表的name，之前取的是create_sheet    sheet = wb.get_sheet_by_name(&quot;create_sheet&quot;)    sheet[&apos;C3&apos;] = &apos;new data&apos;    wb.save(&quot;create_excel.xlsx&quot;)</span><br></pre></td></tr></table></figure>

<p>调用更新数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">updateExcel()</span><br></pre></td></tr></table></figure>



<p>4、 查找数据</p>
<p>目标:查找所有数据</p>
<p>思路</p>
<p>获得最大列和最大行，进行遍历，需要注意行和列都是从1开始的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def selectExcel():    # 打开一个工作薄    wb = load_workbook(&apos;create_excel.xlsx&apos;,data_only=True) #data_only=True是关键，显示公式结果    # 获取一张表，需要对应那个表的name，之前取的是create_sheet    sheet=wb.get_sheet_by_name(&quot;create_sheet&quot;)    # 获取A1格的值    print(&quot;A1的值  &quot;,sheet[&apos;A1&apos;].value)    # 获取表的内容的最大工作行数    print(&quot;表最大工作行数  &quot;,sheet.max_row)    # 获取表的内容的最大工作列数    print(&quot;表最大工作列数  &quot;,sheet.max_column)    # 遍历表中所有内容    for row in sheet.rows:        #row是每一行中的数据        for cell in row:            print(cell.value,end=&quot; &quot;)        print(&quot;&quot;)</span><br></pre></td></tr></table></figure>



<p>调用查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">selectExcel()</span><br></pre></td></tr></table></figure>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-09-26T04:03:29.000Z">2017-09-26</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Excel/">Excel</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Excel/Excel-openpyxl-数据梳理/">Excel-openpyxl--数据梳理</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    13 分钟 读完 (大约 1907 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/09/26/Excel-openpyxl-数据梳理/">Excel-openpyxl--数据梳理</a>
            
        </h1>
        <div class="content">
            <p>通过这篇文章，你能学习到以下内容</p>
<p>1、读取文件<br>2、整理数据结构:字典类型 key是班级id value 是数组类型，数组里面对应的是字典，对应每一行数据<br>3、遍历所有value，读取的数组传入到一个函数中<br>4、函数中处理计数变量，开始遍历数组<br>5、在函数中操作全局变量，记录整理好的数据<br>6、把整理好的数据写入</p>
<p>1、需求：</p>
<p>读取<a href="http://47.93.248.15/wp-content/uploads/2018/05/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE.xlsx" target="_blank" rel="noopener">基础数据</a>然后按照<a href="http://47.93.248.15/wp-content/uploads/2018/05/%E7%BB%93%E6%9E%9C%E6%A8%A1%E6%9D%BF.xlsx" target="_blank" rel="noopener">结果模板</a>进行处理，数据中是按照班级进行分组统计</p>
<p>基础数据一次运算消耗时间太大，简化数据，使用<a href="http://47.93.248.15/wp-content/uploads/2018/05/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE1.xlsx" target="_blank" rel="noopener">基础数据1</a>来调试程序</p>
<p>2、思路：</p>
<p>2.1、读取文件<br>2.2、整理数据结构:字典类型 key是班级id value 是数组类型，数组里面对应的是字典，对应每一行数据<br>2.3、遍历所有value，读取的数组传入到一个函数中<br>2.4、函数中处理计数变量，开始遍历数组<br>2.5、在函数中操作全局变量，记录整理好的数据<br>2.6、把整理好的数据写入</p>
<p>3、实现</p>
<p><a href="http://47.93.248.15/wp-content/uploads/2018/05/MyTools.py_.zip" target="_blank" rel="noopener">完整代码</a></p>
<p><strong>读取Excel数据，梳理数据，把id相同的保存在一起，以每行数据作为一个对象，统一操作</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook</span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook</span><br><span class="line"><span class="comment"># 一个eggache的数字转为列字母的方法</span></span><br><span class="line"><span class="keyword">from</span> openpyxl.utils <span class="keyword">import</span> get_column_letter</span><br><span class="line"><span class="keyword">from</span> openpyxl.reader.excel <span class="keyword">import</span> load_workbook</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#读取Excel数据</span></span><br><span class="line"> </span><br><span class="line">dicdata=&#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">readExcel</span><span class="params">(file_name)</span>:</span></span><br><span class="line">    wb2=load_workbook(file_name,data_only=<span class="literal">True</span>)    <span class="comment">#读取excel  data_only=True是关键，显示公式结果</span></span><br><span class="line">    ws2=wb2.get_sheet_by_name(<span class="string">"收入确认"</span>)<span class="comment">#wb2.active是默认第一个</span></span><br><span class="line">    <span class="comment"># ws2=wb2.active#wb2.active是默认第一个</span></span><br><span class="line">    <span class="comment">#读取每一行内容</span></span><br><span class="line">    i=<span class="number">0</span></span><br><span class="line">    <span class="comment">#注 ：ws2.rows[i] 这种方式特别耗时</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> ws2.rows:</span><br><span class="line">        i=i+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> i&lt;<span class="number">4</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        classid=str(row[<span class="number">2</span>].value)</span><br><span class="line">        arr = dicdata.get(classid)</span><br><span class="line">        <span class="keyword">if</span> arr == <span class="literal">None</span>:</span><br><span class="line">            dicdata[classid] = [row]<span class="comment">#如果空就新增一个id对应</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            arr.append(row)<span class="comment"># 追加数据即可</span></span><br></pre></td></tr></table></figure>

<p><strong>数据处理，对每一个班级内数据进行合并计算</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#读取Excel数据</span></span><br><span class="line"> </span><br><span class="line">dicdata=&#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">readExcel</span><span class="params">(file_name)</span>:</span></span><br><span class="line">    wb2=load_workbook(file_name,data_only=<span class="literal">True</span>)    <span class="comment">#读取excel  data_only=True是关键，显示公式结果</span></span><br><span class="line">    ws2=wb2.get_sheet_by_name(<span class="string">"收入确认"</span>)<span class="comment">#wb2.active是默认第一个</span></span><br><span class="line">    <span class="comment"># ws2=wb2.active#wb2.active是默认第一个</span></span><br><span class="line">    <span class="comment">#读取每一行内容</span></span><br><span class="line">    i=<span class="number">0</span></span><br><span class="line">    <span class="comment">#注 ：ws2.rows[i] 这种方式特别耗时</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> ws2.rows:</span><br><span class="line">        i=i+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> i&lt;<span class="number">4</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        classid=str(row[<span class="number">2</span>].value)</span><br><span class="line">        arr = dicdata.get(classid)</span><br><span class="line">        <span class="keyword">if</span> arr == <span class="literal">None</span>:</span><br><span class="line">            dicdata[classid] = [row]<span class="comment">#如果空就新增一个id对应</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            arr.append(row)<span class="comment"># 追加数据即可</span></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">数据处理，对每一个班级内数据进行合并计算</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_data</span><span class="params">(arr,classid)</span>:</span></span><br><span class="line">    校区=arr[<span class="number">0</span>][<span class="number">1</span>].value</span><br><span class="line">    班级id=classid</span><br><span class="line">    <span class="comment">#班级名字没有，用班级类型替代</span></span><br><span class="line">    班级名字=arr[<span class="number">0</span>][<span class="number">9</span>].value</span><br><span class="line">    班级类型=arr[<span class="number">0</span>][<span class="number">9</span>].value</span><br><span class="line">    学科=arr[<span class="number">0</span>][<span class="number">10</span>].value</span><br><span class="line">    授课模式=arr[<span class="number">0</span>][<span class="number">17</span>].value</span><br><span class="line">    开班日期=arr[<span class="number">0</span>][<span class="number">13</span>].value</span><br><span class="line">    预计毕业时间=arr[<span class="number">0</span>][<span class="number">14</span>].value</span><br><span class="line">    毕业时间=arr[<span class="number">0</span>][<span class="number">15</span>].value</span><br><span class="line">    预计毕业总时间=arr[<span class="number">0</span>][<span class="number">18</span>].value</span><br><span class="line">    执行价格合计 = 优惠金额小计 = 应交学费合计 =<span class="number">0</span></span><br><span class="line">    新生 = 升级 = 转班来 = 退学归来 = 重读 = 留级 = 退学 = 转班走 = 休学 = 开除 = <span class="number">0</span></span><br><span class="line">    收款合计 = 收款合计<span class="number">2015</span> = 收款合计<span class="number">2016</span> = 收款合计<span class="number">2017</span> = 收款合计<span class="number">2018</span> = <span class="number">0</span></span><br><span class="line">    班级已确认收入小计 = 收入确认培训<span class="number">2015</span> = 收入确认培训<span class="number">2016</span> = 收入确认培训<span class="number">2017</span> = 收入确认培训<span class="number">2018</span> = <span class="number">0</span></span><br><span class="line">    现金折扣合计 = 现金折扣<span class="number">2015</span> = 现金折扣<span class="number">2016</span> = 现金折扣<span class="number">2017</span> = 现金折扣<span class="number">2018</span> = <span class="number">0</span></span><br><span class="line">    <span class="comment">#记录后面44-298的所有内容</span></span><br><span class="line">    arrtest=[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">38</span>,len(arr[<span class="number">0</span>]))]</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#遍历所有row</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> arr:</span><br><span class="line">        执行价格合计=执行价格合计+row[<span class="number">3</span>].value</span><br><span class="line">        优惠金额小计=优惠金额小计+row[<span class="number">7</span>].value</span><br><span class="line">        应交学费合计=应交学费合计+row[<span class="number">8</span>].value</span><br><span class="line">        <span class="comment">#判断状态</span></span><br><span class="line">        status=row[<span class="number">11</span>].value</span><br><span class="line">        <span class="keyword">if</span> status == <span class="string">"新生"</span>:</span><br><span class="line">            新生=新生+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> status == <span class="string">"升级"</span>:</span><br><span class="line">            升级=升级+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> status == <span class="string">"转班来"</span>:</span><br><span class="line">            转班来=转班来+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> status == <span class="string">"退学归来"</span>:</span><br><span class="line">            退学归来=退学归来+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> status == <span class="string">"重读"</span>:</span><br><span class="line">            重读=重读+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> status == <span class="string">"留级"</span>:</span><br><span class="line">            留级=留级+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> status == <span class="string">"退学"</span>:</span><br><span class="line">            退学=退学+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> status == <span class="string">"转班走"</span>:</span><br><span class="line">            转班走=转班走+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> status == <span class="string">"休学"</span>:</span><br><span class="line">            休学=休学+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> status == <span class="string">"开除"</span>:</span><br><span class="line">            开除=开除+<span class="number">1</span></span><br><span class="line">        收款合计=收款合计+row[<span class="number">20</span>].value</span><br><span class="line">        收款合计<span class="number">2015</span>=收款合计<span class="number">2015</span>+row[<span class="number">22</span>].value</span><br><span class="line">        收款合计<span class="number">2016</span>=收款合计<span class="number">2016</span>+row[<span class="number">23</span>].value</span><br><span class="line">        收款合计<span class="number">2017</span>=收款合计<span class="number">2017</span>+row[<span class="number">24</span>].value</span><br><span class="line">        收款合计<span class="number">2018</span> = 收款合计<span class="number">2018</span> + row[<span class="number">25</span>].value</span><br><span class="line">        班级已确认收入小计=班级已确认收入小计+row[<span class="number">26</span>].value</span><br><span class="line">        收入确认培训<span class="number">2015</span>=收入确认培训<span class="number">2015</span>+row[<span class="number">28</span>].value</span><br><span class="line">        收入确认培训<span class="number">2016</span>=收入确认培训<span class="number">2016</span>+row[<span class="number">29</span>].value</span><br><span class="line">        收入确认培训<span class="number">2017</span>=收入确认培训<span class="number">2017</span>+row[<span class="number">30</span>].value</span><br><span class="line">        收入确认培训<span class="number">2018</span>=收入确认培训<span class="number">2018</span>+row[<span class="number">31</span>].value</span><br><span class="line">        现金折扣合计=现金折扣合计+row[<span class="number">32</span>].value</span><br><span class="line">        现金折扣<span class="number">2015</span>=现金折扣<span class="number">2015</span>+row[<span class="number">34</span>].value</span><br><span class="line">        现金折扣<span class="number">2016</span> = 现金折扣<span class="number">2016</span> + row[<span class="number">35</span>].value</span><br><span class="line">        现金折扣<span class="number">2017</span> = 现金折扣<span class="number">2017</span> + row[<span class="number">36</span>].value</span><br><span class="line">        现金折扣<span class="number">2018</span> = 现金折扣<span class="number">2018</span> + row[<span class="number">37</span>].value</span><br><span class="line">        <span class="comment"># 执行价格合计 = 优惠金额小计 = 应交学费合计 0</span></span><br><span class="line">        <span class="comment"># 新生 = 升级 = 转班来 = 退学归来 = 重读 = 留级 = 退学 = 转班走 = 休学 = 开除 = 0</span></span><br><span class="line">        <span class="comment"># 收款合计 = 收款合计2015 = 收款合计2016 = 收款合计2017 = 收款合计2018 = 0</span></span><br><span class="line">        <span class="comment"># 班级已确认收入小计 = 收入确认培训2015 = 收入确认培训2016 = 收入确认培训2017 = 收入确认培训2018 = 0</span></span><br><span class="line">        <span class="comment"># 现金折扣合计 = 现金折扣2015 = 现金折扣2016 = 现金折扣2017 = 现金折扣2018 = 0</span></span><br><span class="line">       <span class="comment">#开始循环剩下的字段</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">38</span>,len(row)):</span><br><span class="line">            <span class="keyword">if</span> row[i].value == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            value=arrtest[i<span class="number">-38</span>];<span class="comment">#读取</span></span><br><span class="line">            value=value+row[i].value<span class="comment">#累加</span></span><br><span class="line">            arrtest[i<span class="number">-38</span>]=value</span><br><span class="line">    <span class="comment"># 保存前面所有累加数据</span></span><br><span class="line">    result_arr = [校区, 班级id, 班级名字, 班级类型, 学科, 授课模式, 开班日期, 预计毕业时间, 毕业时间, 预计毕业总时间, 执行价格合计, 优惠金额小计, 应交学费合计,</span><br><span class="line">                  新生, 升级, 转班来, 退学归来, 重读, 留级, 退学, 转班走, 休学, 开除, 收款合计, 收款合计<span class="number">2015</span>, 收款合计<span class="number">2016</span>, 收款合计<span class="number">2017</span>, 收款合计<span class="number">2018</span>,</span><br><span class="line">                  班级已确认收入小计, 收入确认培训<span class="number">2015</span>, 收入确认培训<span class="number">2016</span>, 收入确认培训<span class="number">2017</span>, 收入确认培训<span class="number">2018</span>, 现金折扣合计, 现金折扣<span class="number">2015</span>, 现金折扣<span class="number">2016</span>, 现金折扣<span class="number">2017</span>,</span><br><span class="line">                  现金折扣<span class="number">2018</span>]</span><br><span class="line">    <span class="comment">#获得的最终每条的总数据</span></span><br><span class="line">    result_arr=result_arr+arrtest</span><br><span class="line">    <span class="keyword">return</span> result_arr</span><br></pre></td></tr></table></figure>

<p><strong>写入数据</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_to_excel_with_openpyxl</span><span class="params">(result_arr,head_row=None,save_excel_name=<span class="string">"save.xlsx"</span>)</span>:</span></span><br><span class="line">    page = <span class="number">0</span></span><br><span class="line">    <span class="comment"># 新建一个workbook</span></span><br><span class="line">    wb = Workbook()</span><br><span class="line">    <span class="comment"># 设置文件输出路径与名称</span></span><br><span class="line">    dest_filename = save_excel_name</span><br><span class="line">    <span class="comment"># 第一个sheet是ws</span></span><br><span class="line">    ws = wb.create_sheet(<span class="number">0</span>,page)</span><br><span class="line">    <span class="comment"># # 写第一行，标题行</span></span><br><span class="line">    <span class="comment"># for h_x in range(1, len(head_row) + 1):</span></span><br><span class="line">    <span class="comment">#     h_col = get_column_letter(h_x)</span></span><br><span class="line">    <span class="comment">#     # print h_col</span></span><br><span class="line">    <span class="comment">#     ws.cell('%s%s' % (h_col, 1)).value = '%s' % (head_row[h_x - 1])</span></span><br><span class="line">    page += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> len(result_arr) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(result_arr)):</span><br><span class="line">        <span class="comment"># 对result的每个子元素作遍历，</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(result_arr[i])):</span><br><span class="line">            <span class="comment">#列是从1开始计算的</span></span><br><span class="line">            ws.cell(row=i+<span class="number">1</span>,column=j+<span class="number">1</span>).value = result_arr[i][j]</span><br><span class="line">    print(<span class="string">"正在写入，进行保存"</span>,dest_filename)</span><br><span class="line">    wb.save(<span class="string">'save.xlsx'</span>)</span><br><span class="line">    <span class="comment"># wb.save(filename=(os.path.dirname(sys.argv[0])+'/save.xlsx'))</span></span><br></pre></td></tr></table></figure>

<p>最后进行遍历调用每一个数据，保存在数组中进行写入</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># print(sys.argv[0])#当前文件路径</span></span><br><span class="line">path =os.path.dirname(sys.argv[<span class="number">0</span>])</span><br><span class="line"><span class="keyword">print</span> (path)<span class="comment">#上一级目录</span></span><br><span class="line"> </span><br><span class="line">readExcel(<span class="string">'基础数据1.xlsx'</span>)<span class="comment">#读取了数据</span></span><br><span class="line">allresult_arr=[]</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> dicdata:</span><br><span class="line">    result_arr= handle_data(dicdata[key],key)</span><br><span class="line">    allresult_arr.append(result_arr)</span><br><span class="line">print(<span class="string">"准备开始写入数据"</span>)</span><br><span class="line">write_to_excel_with_openpyxl(allresult_arr)</span><br><span class="line">print(<span class="string">"写入完成"</span>)</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-08-05T12:21:05.000Z">2017-08-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Excel/">Excel</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Excel/Excel-openpyxl-创建和读取/">Excel-openpyxl-创建和读取</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 分钟 读完 (大约 871 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/08/05/Excel-openpyxl-创建和读取/">Excel-openpyxl-创建和读取</a>
            
        </h1>
        <div class="content">
            <p>####Excel-openpyxl-创建和读取</p>
<p>通过这篇文章你能够学习到以下内容**</p>
<ol>
<li>操作excel有哪些库</li>
<li>openpyxl是什么</li>
<li>openpyxl读取、创建excel</li>
</ol>
<p><strong>1、操作**</strong>excel<strong>**有哪些库</strong></p>
<p><img src="http://47.93.248.15/wp-content/uploads/2018/05/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2018-05-10-%E4%B8%8B%E5%8D%886.11.49-1024x870.png" alt="img"></p>
<p>wlrd：只能处理65535行内的数据，如果数据量超过65535行，则会出现报错</p>
<p><strong>2、openpyxl是什么</strong></p>
<p>openpyxl模块是一个对Excel操作Python库，能够处理更多数据的内容，但是相对与xlrd，openpyxl的读取效率要远远低于xlrd</p>
<p>以上需要根据实际业务需求进行选择，这里主要讲解openpyxl库</p>
<p>首先先清楚一些excel的基本概念：</p>
<p>在openpyxl中，主要用到三个概念：Workbooks，Sheets，Cells。Workbook就是一个excel工作表；Sheet是工作表中的一张表页；Cell就是简单的一个格。openpyxl就是围绕着这三个概念进行的，不管读写都是“三板斧”：打开Workbook，定位Sheet，操作Cell。</p>
<p>总结:</p>
<ul>
<li>workbooks是excel一个工作表，一个工作表包含多个页，即包含多个sheet</li>
<li>sheet是excel当中的一页，一个工作页包含多个表格，即包含多个cell</li>
<li>cell是excel当中的一个工作表格</li>
</ul>
<p><strong>3、openpyxl读取、创建excel</strong></p>
<p><a href="http://47.93.248.15/wp-content/uploads/2018/05/openpyxldemo.py_.zip" target="_blank" rel="noopener">openpyxl读写、创建代码下载</a></p>
<p>3.1  安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install openpyxl</span><br></pre></td></tr></table></figure>

<p>(简便安装:使用pycharm，导入模块，按alt+回车自动安装，其实后面实现也是pip install openpyxl)</p>
<p>3.2 创建Excel</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from openpyxl import load_workbookfrom openpyxl import Workbookdef createExcel():    #创建一个工作薄    wb = Workbook()    #通过工作簿创建一个工作表，默认是第一个工作表    sheet = wb.active    #可以通过create_sheet来指定创建第几个sheet    #ws = wb.create_sheet(1,&apos;custom&apos;)    # excel创建的工作表名默认为sheet1    sheet.title = &apos;create_sheet&apos;    # 向工作表中输入内容(C3对应是ExcelC3的位置)    sheet[&apos;C3&apos;] = &apos;hello word&apos;    #对A列1-10输入内容    for i in range(10):      sheet[&apos;A%d&apos; % (i+1)] = i+1    # 向excel表中输入表达式 C2显示内容为A列求和    sheet[&apos;C2&apos;] = &apos;=SUM(A:A)&apos;    # 保存一个文档    wb.save(&apos;create_excel.xlsx&apos;)createExcel()</span><br></pre></td></tr></table></figure>

<p>这样在这个py文件的同一文件夹下，会生成一个create_excel.xlsx</p>
<p><img src="http://47.93.248.15/wp-content/uploads/2018/05/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2018-05-09-%E4%B8%8A%E5%8D%8811.19.37.png" alt="img"></p>
<p>3.3 读取Excel</p>
<p>在刚才我们创建了这个Excel文件，现在来进行读取Excel文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def loadExcel():    # 打开一个工作薄    wb = load_workbook(&apos;create_excel.xlsx&apos;,data_only=True) #data_only=True是关键，显示公式结果    # 获取一张表，需要对应那个表的name，之前取的是create_sheet    sheet=wb.get_sheet_by_name(&quot;create_sheet&quot;)    # 获取A1格的值    print(&quot;A1的值  &quot;,sheet[&apos;A1&apos;].value)    # 获取表的内容的最大工作行数    print(&quot;表最大工作行数  &quot;,sheet.max_row)    # 获取表的内容的最大工作列数    print(&quot;表最大工作列数  &quot;,sheet.max_column)    # 遍历表中所有内容    for row in sheet.rows:        #row是每一行中的数据        for cell in row:            print(cell.value,end=&quot; &quot;)        print(&quot;&quot;)        # row[2].valueloadExcel()</span><br></pre></td></tr></table></figure>

<p>显示结果如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A1的值 1表最大工作行数 10表最大工作列数 31 None None 2 None 55 3 None hello word 4 None None 5 None None 6 None None 7 None None 8 None None 9 None None 10 None None</span><br></pre></td></tr></table></figure>

<p>通过结果，会发现最大行数和最大列数指的是我们文档中写入的数据最后一行和最后一列</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-05-03T01:10:10.000Z">2017-05-03</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/爬虫/">爬虫</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/爬虫/scrapy-5-文件图片下载/">scrapy-5-文件图片下载</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    10 分钟 读完 (大约 1437 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/05/03/scrapy-5-文件图片下载/">scrapy-5-文件图片下载</a>
            
        </h1>
        <div class="content">
            <p>在scrapy中提供了2种下载通道</p>
<p>FilesPipeline    提供文件下载</p>
<p>ImagesPipline  提供图片的下载，额外提供缩略图</p>
<p>这2个ItemPipline作为特殊的下载器，用户使用时，只需要通过item的一个特殊字段，将要下载文件或图片url进行赋值，他们就会自动将文件或者图片下载本地。并将下载结果信息存入到item的另一个特殊字段中</p>
<p>FilePipline的使用</p>
<p>导入路径  scrapy.pipelines.files.FilesPipeline</p>
<p>Item字段  file_urls,files</p>
<p>下载目录  FILES_STORE</p>
<p>请看一下前端页面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'/book/sg.pdf'</span>&gt;</span>下载三国演义<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'/book/shz.pdf'</span>&gt;</span>下载水浒传<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'/book/hlm.pdf'</span>&gt;</span>下载红楼梦<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'/book/xyj.pdf'</span>&gt;</span>下载西游记<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用FilePipLine通常置于其他ItemPipline之前</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ITEM_PIPELINES=&#123;<span class="string">'scrapy.pipelines.files.FilesPipeline'</span>:<span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure>

<p>在配置文件setting.py中使用FILES_STORE指定文件下载目录</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FILES_STORE=<span class="string">'/home/zhangcheng/Download/scrapy'</span></span><br></pre></td></tr></table></figure>

<p>在Spider解析一个包含文件下载链接的页面时，将所有需要下载的文件的url地址收集到一个列表，赋给item的file_urls字段(item[‘file_urls’]) FilesPipeline在处理每一项item时，会读取item[‘file_urls’],对其中每一个url进行下载</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DownloadBookSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(response)</span>:</span></span><br><span class="line"> item=&#123;&#125;</span><br><span class="line"> <span class="comment">#下载列表</span></span><br><span class="line"> item[<span class="string">'file_urls'</span>]=[]</span><br><span class="line"> <span class="keyword">for</span> url <span class="keyword">in</span> response.xpath(<span class="string">'//a/@href'</span>).extract():</span><br><span class="line"> download_url=response.urljoin(url)</span><br><span class="line"> <span class="comment">#将url填入下载列表</span></span><br><span class="line"> item[<span class="string">'file_urls'</span>].append(download_url)</span><br><span class="line"> <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure>

<p>当FilesPipeline下载完item[‘file_urls’]中的所有文件后，会将各文件的下载结果信息收集到另一个列表，赋给item的files字段(item[‘files’])，下载结果包括以下内容</p>
<p>Path 文件下载到本地的路径</p>
<p>Checksum 文件的校验和</p>
<p>url 文件的url地址</p>
<p>ImagesPipeline使用</p>
<p>导入路径  scrapy.pipelines.images.ImagesPipeline</p>
<p>Item字段  image_urls,images</p>
<p>下载目录  IMAGES_STORE</p>
<p>ImagesPipeline是在FilesPipeline基础上针对图片图片增加了一些特有功能</p>
<p>为图片生成缩略图</p>
<p>开启该功能，需要在setting中设置IMAGES_THUMBS  是一个字典，每一项的值是缩略图的尺寸</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IMAGES_THUMBS=&#123; <span class="string">'small'</span>:(<span class="number">50</span>,<span class="number">50</span>), <span class="string">'big'</span>:(<span class="number">270</span>,<span class="number">270</span>),&#125;</span><br></pre></td></tr></table></figure>

<p>开启该功能后，下载一张图片，本地会出现三张图片，分别在full、thumbs/small下 thumbs/big下</p>
<p>过滤掉尺寸过小的图片</p>
<p>在setting.py中设置IMAGES_MIN_WIDTH和IMAGES_MIN_HEIGHT</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IMAGES_MIN_WIDTH=<span class="number">110</span>IMAGES_MIN_HEIGHT=<span class="number">110</span></span><br></pre></td></tr></table></figure>

<p>开启该功能后，如果下载了一张105<img src="https://s.w.org/images/core/emoji/11/svg/2716.svg" alt="✖">200的图片，该图片就会被抛弃掉，因为宽度不符合</p>
<p>文件下载例子</p>
<p>爬取matplotlib网站源码文件  html解析下载文件</p>
<p>创建项目</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject matplotlib_examples</span><br></pre></td></tr></table></figure>

<p>到项目目录下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd matplotlib_examples/</span><br></pre></td></tr></table></figure>

<p>爬虫模板</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy genspider examples matplotlib.org</span><br></pre></td></tr></table></figure>

<p><img src="http://47.93.248.15/wp-content/uploads/2018/05/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2018-05-02-%E4%B8%8B%E5%8D%886.07.23.png" alt="img"></p>
<p>编辑items.py增加模型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExampleItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">     file_urls=scrapy.Field()</span><br><span class="line">     files=scrapy.Field()</span><br></pre></td></tr></table></figure>

<p>编辑examples.py实现爬虫逻辑</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"> <span class="keyword">from</span> scrapy.linkextractors <span class="keyword">import</span> LinkExtractor</span><br><span class="line"> <span class="keyword">from</span> matplotlib_examples.items <span class="keyword">import</span> ExampleItem</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">ExamplesSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">     name = <span class="string">'examples'</span></span><br><span class="line">     allowed_domains = [<span class="string">'matplotlib.org'</span>]</span><br><span class="line">     start_urls = [<span class="string">'http://matplotlib.org/examples/index.html'</span>]</span><br><span class="line"> </span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">         le =LinkExtractor(restrict_css=<span class="string">'div.toctree-wrapper.compound'</span>,deny=<span class="string">'/index.html$'</span>)</span><br><span class="line">         <span class="keyword">for</span> link <span class="keyword">in</span> le.extract_links(response):</span><br><span class="line">             <span class="keyword">yield</span> scrapy.Request(link.url,callback=self.parse_example)</span><br><span class="line"> </span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">parse_example</span><span class="params">(self,response)</span>:</span></span><br><span class="line">         href = response.css(<span class="string">'a.reference.external::attr(href)'</span>).extract_first()</span><br><span class="line">         url =response.urljoin(href)</span><br><span class="line">         example=ExampleItem()</span><br><span class="line">         print(url)</span><br><span class="line">         example[<span class="string">'file_urls'</span>]=[url]</span><br><span class="line">         <span class="keyword">return</span> example</span><br></pre></td></tr></table></figure>

<p>在setting.py中增加下载模块，下载模块会自动寻找file_urls字段</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ITEM_PIPELINES=&#123;</span><br><span class="line">     <span class="string">'scrapy.pipelines.files.FilesPipeline'</span>:<span class="number">1</span></span><br><span class="line"> &#125;</span><br><span class="line"> FILES_STORE=<span class="string">'examples_src'</span></span><br></pre></td></tr></table></figure>

<p>增加run.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf8</span></span><br><span class="line"> <span class="keyword">from</span>  scrapy.cmdline <span class="keyword">import</span> execute</span><br><span class="line"> execute(<span class="string">'scrapy crawl examples -o examples.json'</span>.split())</span><br></pre></td></tr></table></figure>

<p>运行run.py</p>
<p>最后产生一个examples.json文件和一个examples_src文件夹，examples.json文件保存抓取下的数据,文件夹中保存的下载后的文件</p>
<p><img src="http://47.93.248.15/wp-content/uploads/2018/05/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2018-05-02-%E4%B8%8B%E5%8D%886.08.16.png" alt="img"></p>
<p>但是下载的内容，会全部保存在full这个我们指定的文件夹下，但是文件名称为一段很长的sha散列值的文件，这是为了防止文件覆盖，但是这样很不方便阅读</p>
<p>我们期望每个文件都存入我们指定的地方，实际上FilesPipline里面的file_path方法决定了文件名，所以就需要我们继承FilesPipline重写file_path的方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urlparse</span><br><span class="line"> <span class="keyword">from</span> os.path <span class="keyword">import</span>  basename,dirname,join</span><br><span class="line"> <span class="keyword">from</span> scrapy.pipelines.files <span class="keyword">import</span> FilesPipeline</span><br><span class="line"> </span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">MyFilePipeline</span><span class="params">(FilesPipeline)</span>:</span></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">file_path</span><span class="params">(self, request, response=None, info=None)</span>:</span></span><br><span class="line">         path=urlparse(request.url).path</span><br><span class="line">         <span class="keyword">return</span> join(basename(dirname(path)),basename(path))</span><br></pre></td></tr></table></figure>

<p>在setting.py中添加的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ITEM_PIPELINES=&#123;     <span class="comment"># 'scrapy.pipelines.files.FilesPipeline':1     'toscrape_book.pipelines.MyFilesPipeline': 300,  &#125;</span></span><br></pre></td></tr></table></figure>

<p>重新运行后，则展示了对应的文件在对应的文件夹下</p>
<p>此例子可以应用在下载对应的组图中</p>
<p>360图片下载项目   json+下载项目</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject so_image</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd so_image</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy genspider images image.so.com</span><br></pre></td></tr></table></figure>

<p>使用pycharm打开</p>
<p>在setting.py中添加ImagesPipeline</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ITEM_PIPELINES=&#123;     </span><br><span class="line"><span class="string">'scrapy.pipelines.images.ImagesPipeline'</span>:<span class="number">1</span> </span><br><span class="line">&#125; IMAGES_STORE=<span class="string">'download_images'</span></span><br></pre></td></tr></table></figure>

<p>实现imagesSpider.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"> <span class="keyword">import</span> json</span><br><span class="line"> <span class="keyword">from</span> scrapy <span class="keyword">import</span>  Request</span><br><span class="line"> </span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">ImagesSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">     BASE_URL=<span class="string">'http://image.so.com/zj?ch=art&amp;sn=%s&amp;listtype=new&amp;temp=1'</span></span><br><span class="line">     <span class="comment">#限制最大下载量，防止磁盘用量过大</span></span><br><span class="line">     MAX_DOWNLOAD_NUM=<span class="number">1000</span></span><br><span class="line">     name = <span class="string">'images'</span></span><br><span class="line">     allowed_domains = [<span class="string">'image.so.com'</span>]</span><br><span class="line">     start_urls = [BASE_URL%<span class="number">0</span>]</span><br><span class="line"> </span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">         <span class="comment">#使用json模块解析响应结果</span></span><br><span class="line">         infos= json.loads(response.body.decode(<span class="string">'utf-8'</span>))</span><br><span class="line">         <span class="comment">#提取所有的图片下载url到一个列表，赋值给item的image_urls字段</span></span><br><span class="line">         <span class="keyword">yield</span> &#123;<span class="string">'image_urls'</span>:[info[<span class="string">'qhimg_url'</span>] <span class="keyword">for</span> info <span class="keyword">in</span> infos[<span class="string">'list'</span>]]&#125;</span><br><span class="line">         <span class="comment">#如count字段大于0，并且下载数据不足MAX_DOWNLOAD_NUM,继续获取下一页图片信息</span></span><br><span class="line">         self.start_index+=infos[<span class="string">'count'</span>]</span><br><span class="line">         <span class="keyword">if</span> infos[<span class="string">'count'</span>] &gt;<span class="number">0</span> <span class="keyword">and</span> self.start_index&lt;self.MAX_DOWNLOAD_NUM:</span><br><span class="line">             <span class="keyword">yield</span> Request(self.BASE_URL%self.start_index)</span><br></pre></td></tr></table></figure>

<p>在setting.py中设置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ROBOTSTXT_OBEY = <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p>创建运行run.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span>  scrapy.cmdline <span class="keyword">import</span> execute </span><br><span class="line">execute([<span class="string">'scrapy'</span>,<span class="string">'crawl'</span>,<span class="string">'images'</span>])</span><br></pre></td></tr></table></figure>

<p>查看结果，可以看到下载的图片</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-04-25T13:38:42.000Z">2017-04-25</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/docker/">docker</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    11 分钟 读完 (大约 1587 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/04/25/docker/">docker</a>
            
        </h1>
        <div class="content">
            <p>####Python操作docker</p>
<p>通过python调用docker，需要和docker在同一个服务器上才可以</p>
<p>也可以通过传递</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unix:///var/run1/docker.sock</span><br></pre></td></tr></table></figure>

<p>来进行在容器内操作你指定想要连接的docker，这个共享需要在容器最开始创建时候，让容器和外部一个文件进行关联才可以，具体可以参照一下</p>
<p>docker run -d -it -p 805:80 -p 5002:5000 -p 10027:22 -p 20001:8888 -p 20002:3306 –name centos_master –privileged=true -v /var/run/docker.sock:/var/run/docker.sock -v /zc:/zc -e LANG=zh_CN.utf8 zhangcheng0111/centos7-webssh-dockermanager-ssh /usr/sbin/init</p>
<p>其中比较关键的是-v /var/run/docker.sock:/var/run/docker.sock  映射了容器内部和外部的关联文件</p>
<p>以下介绍通过python控制</p>
<p>官方文档地址<a href="https://github.com/docker/docker-py" target="_blank" rel="noopener">https://github.com/docker/docker-py</a>  只能作为参考，写的很简单</p>
<p>docker-py实际上分为很多版本，新版和旧版的api不一样，新版的删除掉了很多实用的方法，并且没有经过实际生产环境验证，无法得知具体使用效果，这里所说的是基于旧版的1.19版本</p>
<p>安装docker-py</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install docker-py</span><br></pre></td></tr></table></figure>

<p><img src="http://47.93.248.15/wp-content/uploads/2018/07/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2018-07-20-%E4%B8%8B%E5%8D%887.17.30.png" alt="img"></p>
<p>一、初始化docker客户端</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import docker</span><br></pre></td></tr></table></figure>

<p>#初始化有2种方式都可以</p>
<p>#第一种</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client = docker.Client(base_url=&apos;unix:///var/run/docker.sock&apos;,version=&apos;1.19&apos;)</span><br></pre></td></tr></table></figure>

<p>其中version指定使用的版本，很重要！！！一定不能少</p>
<p>#第二种</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client=docker.from_env(version=&apos;1.19&apos;)</span><br></pre></td></tr></table></figure>

<p>#推荐使用第一种方式</p>
<p>二、获得镜像信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(clinet.images())</span><br></pre></td></tr></table></figure>

<p>返回的数据是列表形式</p>
<p>拉去镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(clinet.pull(&apos;zhangcheng0111/centos7-webssh-dockermanager-ssh&apos;))</span><br></pre></td></tr></table></figure>

<p>三、根据镜像创建一个容器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client.create_container(image=&apos;zhangcheng0111/centos7-webssh-dockermanager-ssh&apos;, name=&apos;test3&apos;,                             ports=[50070,8088,9000,3306,9999,16010,22,5000,8080,80,8888], command=&quot;/usr/sbin/init&quot;,                             environment=&#123;&quot;LANG&quot;: &quot;zh_CN.utf8&quot;&#125;,                             hostname=&apos;zc01&apos;,                             host_config=self.client.create_host_config(privileged=True,port_bindings=dic1))</span><br></pre></td></tr></table></figure>

<p>参数说明</p>
<p>image=’zhangcheng0111/centos7-webssh-dockermanager-ssh’  是你pull的镜像,这个镜像的地址会从hub.docker.com上查找对应的镜像</p>
<p>name=’test3′   很重要，以后启动容器就靠它了</p>
<p>command=’/usr/sbin/init’ 启动镜像后的命令行，实际上就是进行一些基础服务的启动</p>
<p>volumes=[‘/data’]  数据卷，相当于数据在哪保存，路径是宿主机的，这里没有使用</p>
<p>environment={“LANG”: “zh_CN.utf8”}  设定一些参数</p>
<p>ports=[80,22]   额外开启哪些端口</p>
<p>privileged=True 设置特权启动，让你容器具备这个容器的root权限</p>
<p>port_bindings=dic1 设定具体内部和外部端口的映射{’80’:None}如果采用None，则docker会自动进行分配端口，如果自己手动指定，需要注意不要端口冲突，否则会创建失败的</p>
<p>如果自动分配了，我们如何获得这个容器的外部映射端口号呢？后面会说如何查看这个容器配置，包括内网ip和外网ip</p>
<p>这样我们就创建了一个容器，创建了容器还没有开启</p>
<p>四、获得所有镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(client.containers(all=True))</span><br></pre></td></tr></table></figure>

<p>结果如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;u&apos;Status&apos;: u&apos;Exited (0) About a minute ago&apos;, u&apos;Created&apos;: 1532098433, u&apos;Image&apos;: u&apos;sequenceiq/spark:1.6.0&apos;, u&apos;Labels&apos;: &#123;&#125;, u&apos;NetworkSettings&apos;: &#123;u&apos;Networks&apos;: &#123;u&apos;bridge&apos;: &#123;u&apos;NetworkID&apos;: u&apos;66af7ecb2d04d21dba5bb003a21c2adad034430315cc380fff718c9d7f6e29c3&apos;, u&apos;MacAddress&apos;: u&apos;&apos;, u&apos;GlobalIPv6PrefixLen&apos;: 0, u&apos;Links&apos;: None, u&apos;GlobalIPv6Address&apos;: u&apos;&apos;, u&apos;IPv6Gateway&apos;: u&apos;&apos;, u&apos;DriverOpts&apos;: None, u&apos;IPAMConfig&apos;: None, u&apos;EndpointID&apos;: u&apos;&apos;, u&apos;IPPrefixLen&apos;: 0, u&apos;IPAddress&apos;: u&apos;&apos;, u&apos;Gateway&apos;: u&apos;&apos;, u&apos;Aliases&apos;: None&#125;&#125;&#125;, u&apos;HostConfig&apos;: &#123;u&apos;NetworkMode&apos;: u&apos;default&apos;&#125;, u&apos;ImageID&apos;: u&apos;sha256:40a687b3cdccd2224016c07a5ca20aeca0d0ef9f397d11ae6102ee1245d915d6&apos;, u&apos;State&apos;: u&apos;exited&apos;, u&apos;Command&apos;: u&apos;/etc/bootstrap.sh&apos;, u&apos;Names&apos;: [u&apos;/test3&apos;], u&apos;Mounts&apos;: [], u&apos;Id&apos;: u&apos;d322d097f34c0c18cec0a3dcc863ace22ac14c07e4ff3aaeb4f52816e9a87f69&apos;, u&apos;Ports&apos;: []&#125;, &#123;u&apos;Status&apos;: u&apos;Exited (0) 2 hours ago&apos;, u&apos;Created&apos;: 1532097805, u&apos;Image&apos;: u&apos;sequenceiq/spark:1.6.0&apos;, u&apos;Labels&apos;: &#123;&#125;, u&apos;NetworkSettings&apos;: &#123;u&apos;Networks&apos;: &#123;u&apos;bridge&apos;: &#123;u&apos;NetworkID&apos;: u&apos;66af7ecb2d04d21dba5bb003a21c2adad034430315cc380fff718c9d7f6e29c3&apos;, u&apos;MacAddress&apos;: u&apos;&apos;, u&apos;GlobalIPv6PrefixLen&apos;: 0, u&apos;Links&apos;: None, u&apos;GlobalIPv6Address&apos;: u&apos;&apos;, u&apos;IPv6Gateway&apos;: u&apos;&apos;, u&apos;DriverOpts&apos;: None, u&apos;IPAMConfig&apos;: None, u&apos;EndpointID&apos;: u&apos;&apos;, u&apos;IPPrefixLen&apos;: 0, u&apos;IPAddress&apos;: u&apos;&apos;, u&apos;Gateway&apos;: u&apos;&apos;, u&apos;Aliases&apos;: None&#125;&#125;&#125;, u&apos;HostConfig&apos;: &#123;u&apos;NetworkMode&apos;: u&apos;default&apos;&#125;, u&apos;ImageID&apos;: u&apos;sha256:40a687b3cdccd2224016c07a5ca20aeca0d0ef9f397d11ae6102ee1245d915d6&apos;, u&apos;State&apos;: u&apos;exited&apos;, u&apos;Command&apos;: u&apos;/etc/bootstrap.sh&apos;, u&apos;Names&apos;: [u&apos;/test2&apos;], u&apos;Mounts&apos;: [], u&apos;Id&apos;: u&apos;089dbc622b0409ed70fb6c2bdf735e0edc70282aa2c7f4d0d6b4092d74aa05be&apos;, u&apos;Ports&apos;: []&#125;, &#123;u&apos;Status&apos;: u&apos;Exited (137) 2 hours ago&apos;, u&apos;Created&apos;: 1532097064, u&apos;Image&apos;: u&apos;sequenceiq/spark:1.6.0&apos;, u&apos;Labels&apos;: &#123;&#125;, u&apos;NetworkSettings&apos;: &#123;u&apos;Networks&apos;: &#123;u&apos;bridge&apos;: &#123;u&apos;NetworkID&apos;: u&apos;66af7ecb2d04d21dba5bb003a21c2adad034430315cc380fff718c9d7f6e29c3&apos;, u&apos;MacAddress&apos;: u&apos;&apos;, u&apos;GlobalIPv6PrefixLen&apos;: 0, u&apos;Links&apos;: None, u&apos;GlobalIPv6Address&apos;: u&apos;&apos;, u&apos;IPv6Gateway&apos;: u&apos;&apos;, u&apos;DriverOpts&apos;: None, u&apos;IPAMConfig&apos;: None, u&apos;EndpointID&apos;: u&apos;&apos;, u&apos;IPPrefixLen&apos;: 0, u&apos;IPAddress&apos;: u&apos;&apos;, u&apos;Gateway&apos;: u&apos;&apos;, u&apos;Aliases&apos;: None&#125;&#125;&#125;, u&apos;HostConfig&apos;: &#123;u&apos;NetworkMode&apos;: u&apos;default&apos;&#125;, u&apos;ImageID&apos;: u&apos;sha256:40a687b3cdccd2224016c07a5ca20aeca0d0ef9f397d11ae6102ee1245d915d6&apos;, u&apos;State&apos;: u&apos;exited&apos;, u&apos;Command&apos;: u&apos;/etc/bootstrap.sh&apos;, u&apos;Names&apos;: [u&apos;/test1&apos;], u&apos;Mounts&apos;: [], u&apos;Id&apos;: u&apos;a6b4592de281345d4f5c7e3c7254048214fdeb9581bba13d37aa612cfeff7a8d&apos;, u&apos;Ports&apos;: []&#125;]</span><br></pre></td></tr></table></figure>

<p>五、开启容器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client.statr(container=&apos;test3&apos;,port_bindings=&#123;80:80,22:2022&#125;)</span><br></pre></td></tr></table></figure>

<p>container=’test3′ 创建容器设置的name，用于开启容器<br>port_bindings={80:80,22:2022} 设置容器与宿主机端口之间的映射关系，这里port_bindings我测试过只能修改在你创建时候设定的端口，如果没有开放的端口，则无法修改，所以在这里一般没什么卵用<br>publish_all_ports=True  全端口公开，会依次进行映射外部访问<br>以下参数，没搞明白是干啥的<br>lxc_conf=None  不知道啥意思<br>links=None<br>privileged=False<br>dns=None<br>dns_search=None<br>volumes_from=None<br>network_mode=None<br>restart_policy=None<br>cap_add=None<br>cap_drop=None</p>
<p>六、停止容器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client.stop(container=&apos;test3&apos;)</span><br></pre></td></tr></table></figure>

<p>七、查看容器的具体参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">item = self.client.containers(filters=&#123;&apos;name&apos;: &apos;test3&apos;&#125;)[0]# 遍历获得对应的容器的ip和端口  22和8888的映射端口 ip = item[&apos;NetworkSettings&apos;][&apos;Networks&apos;][&apos;bridge&apos;][&apos;IPAddress&apos;]with open(&quot;/zc/ip.txt&quot;) as f:    wip = f.read().strip(&quot;\n&quot;)print(&apos;外网地址&apos;, wip)print(&apos;内网地址&apos;, ip)# 对应key-value是数字# 遍历获得对应的容器的ip和端口  22和8888的映射端口for port in item[&apos;Ports&apos;]:    dic[port[&apos;PrivatePort&apos;]] = port.get(&apos;PublicPort&apos;)</span><br></pre></td></tr></table></figure>

<p>通过以上我们不难看出通过返回的数据，可以遍历里面的ip地址</p>
<p>至于/zc/ip.txt是这个什么鬼？这个是我外部与内部共享的一个文件，用于获得外部的ip地址，因为容器本身只能获得自己的内网ip地址，无法得知外网地址</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-04-05T08:19:07.000Z">2017-04-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/爬虫/">爬虫</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/爬虫/scrapy-4-链接提取器/">scrapy-4-链接提取器</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 分钟 读完 (大约 572 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/04/05/scrapy-4-链接提取器/">scrapy-4-链接提取器</a>
            
        </h1>
        <div class="content">
            <p>链接提取器，设置规则后，进行批量提取所有连接，主要用于是在CrawlSpider模板中使用的居多</p>
<p>比如提取某个网站上所有数据</p>
<p>使用LinkExtractor需要添加相关头文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.linkextractors <span class="keyword">import</span> LinkExtractor</span><br></pre></td></tr></table></figure>

<p>以下代码进行整站爬取。通过Rule+LinkExtractor结合进行提取了所有页面的数据，CrawlSpider想进行整站所有a标签提取，但是Rule+LinkExtractor进行了限制，筛选出符合我规则的数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> scrapy.spiders <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> scrapy.linkextractors <span class="keyword">import</span> LinkExtractor</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ItcastSpider</span><span class="params">(scrapy.spiders.CrawlSpider)</span>:</span></span><br><span class="line">     name = <span class="string">'book'</span></span><br><span class="line">     start_urls = [<span class="string">'http://books.toscrape.com/'</span>]</span><br><span class="line">     img_urls = []</span><br><span class="line">     rules = (Rule(LinkExtractor(allow=(<span class="string">'http://books.toscrape.com/catalogue/page-\d&#123;1,6&#125;'</span>+<span class="string">'.html'</span>,)),</span><br><span class="line">                  callback=<span class="string">'parse_item'</span>, follow=<span class="literal">True</span>),)</span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">parse_item</span><span class="params">(self,response)</span>:</span></span><br><span class="line">         print(<span class="string">"收到数据"</span>)</span><br></pre></td></tr></table></figure>

<p>注意：连接提取器中的里面的逗号是不能少的，因为Rule接受的是一个可迭代的对象元组</p>
<p>这个方法比较适合对整站数据的规则爬取，不需要自己设置反复爬取的地址了</p>
<p>LinkExtractor相关参数说明</p>
<p>allow  接收一个正则表达式的地址，用于过滤出符合条件的地址</p>
<p>deny  与allow相反，接收一个正则表达式，排除符合条件的地址</p>
<p>allow_domains 接收一个域名或一个域名列表，提取到指定域的链接</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.linkextractors <span class="keyword">import</span> LinkExtractor</span><br><span class="line">domains=[<span class="string">'github.com'</span>,<span class="string">'baidu.com'</span>]</span><br><span class="line">le = LinkExtractor(allow_domains=domains)</span><br><span class="line">links = le.extract_links(response)</span><br><span class="line">[link.url <span class="keyword">for</span> link <span class="keyword">in</span> links]</span><br></pre></td></tr></table></figure>

<p>其中response是获得请求后的结果</p>
<p>deny_domains 与allow_domains相反，排除指定域的连接</p>
<p>restruct_xpaths 接收一个XPath表达式</p>
<p>提取指定页面下的<div id="”top”">元素下的所有链接</div></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.linkextractors <span class="keyword">import</span> LinkExtractor</span><br><span class="line">le = LinkExtractor(restruct_xpaths=<span class="string">'//div[@id="top"]'</span>)</span><br><span class="line">links = le.extract_links(response)</span><br><span class="line">[link.url <span class="keyword">for</span> link <span class="keyword">in</span> links]</span><br></pre></td></tr></table></figure>

<p>其中response是获得请求后的结果</p>
<p>restruct_css 接收一个css选择器或者选择器列表</p>
<p>提取指定页面下<div id="”bottom”">下的链接</div></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.linkextractors <span class="keyword">import</span> LinkExtractor</span><br><span class="line">le = LinkExtractor(restruct_css=<span class="string">'div#bottom"]'</span>)</span><br><span class="line">links = le.extract_links(response)</span><br><span class="line">[link.url <span class="keyword">for</span> link <span class="keyword">in</span> links]</span><br></pre></td></tr></table></figure>



<p>提取JavaScript文件的连接</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.linkextractors <span class="keyword">import</span> LinkExtractor</span><br><span class="line">le = LinkExtractor(tags=<span class="string">'script'</span>,attrs=<span class="string">'src'</span>)</span><br><span class="line">links = le.extract_links(response)</span><br><span class="line">[link.url <span class="keyword">for</span> link <span class="keyword">in</span> links]</span><br><span class="line">process_value</span><br></pre></td></tr></table></figure>

<p>接收一个函数，用于处理连接地址，如果返回none则抛弃这个地址</p>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous is-invisible is-hidden-mobile">
            <a class="is-flex-grow has-text-black-ter" href="/tags/python/page/0/">上一页</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/tags/python/page/2/">下一页</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link is-current" href="/tags/python/">1</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/tags/python/page/2/">2</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/cat/junc.jpg" alt="JUNCON">
                    
                    
                    <p class="is-size-4 is-block">
                        JUNCON
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        The greatest generosity to the future is to give something
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Beijing.China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        29
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        22
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        22
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/junconec" target="_blank">
                关注我</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/junconec">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Facebook" href="https://facebook.com">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Twitter" href="https://twitter.com">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Dribbble" href="https://dribbble.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Django/">
            <span class="level-start">
                <span class="level-item">Django</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Excel/">
            <span class="level-start">
                <span class="level-item">Excel</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Excel/Excel-openpyxl-数据梳理/">
            <span class="level-start">
                <span class="level-item">Excel-openpyxl--数据梳理</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Excel/Excel-openpyxl-创建和读取/">
            <span class="level-start">
                <span class="level-item">Excel-openpyxl-创建和读取</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Excel/Excel-openpyxl-增删改查/">
            <span class="level-start">
                <span class="level-item">Excel-openpyxl-增删改查</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Selenium/">
            <span class="level-start">
                <span class="level-item">Selenium</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Selenium/爬虫-selenium/">
            <span class="level-start">
                <span class="level-item">爬虫+selenium</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/bug/">
            <span class="level-start">
                <span class="level-item">bug</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/docker/">
            <span class="level-start">
                <span class="level-item">docker</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/mysql/">
            <span class="level-start">
                <span class="level-item">mysql</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/python/">
            <span class="level-start">
                <span class="level-item">python</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/smscode/">
            <span class="level-start">
                <span class="level-item">smscode</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/smscode/sendemail/">
            <span class="level-start">
                <span class="level-item">sendemail</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/浅谈少儿编程/">
            <span class="level-start">
                <span class="level-item">浅谈少儿编程</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/爬虫/">
            <span class="level-start">
                <span class="level-item">爬虫</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/爬虫/scrapy-1-快速入门/">
            <span class="level-start">
                <span class="level-item">scrapy-1-快速入门</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/爬虫/scrapy-2-数据解析/">
            <span class="level-start">
                <span class="level-item">scrapy-2-数据解析</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/爬虫/scrapy-3-数据处理/">
            <span class="level-start">
                <span class="level-item">scrapy-3-数据处理</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/爬虫/scrapy-4-链接提取器/">
            <span class="level-start">
                <span class="level-item">scrapy-4-链接提取器</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/爬虫/scrapy-5-文件图片下载/">
            <span class="level-start">
                <span class="level-item">scrapy-5-文件图片下载</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/爬虫/反爬/">
            <span class="level-start">
                <span class="level-item">反爬</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/环境配置/">
            <span class="level-start">
                <span class="level-item">环境配置</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2021/05/09/浅谈【站在孩子的角度，课程的乐趣有几层？】/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="浅谈【站在孩子的角度，课程的乐趣有几层？】">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-05-09T10:01:17.000Z">2021-05-09</time></div>
                    <a href="/2021/05/09/浅谈【站在孩子的角度，课程的乐趣有几层？】/" class="has-link-black-ter is-size-6">浅谈【站在孩子的角度，课程的乐趣有几层？】</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/浅谈少儿编程/">浅谈少儿编程</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/04/09/浅谈【少儿编程行业当前阶段】/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="浅谈【少儿编程行业当前阶段】">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-04-09T09:51:36.000Z">2021-04-09</time></div>
                    <a href="/2021/04/09/浅谈【少儿编程行业当前阶段】/" class="has-link-black-ter is-size-6">浅谈【少儿编程行业当前阶段】</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/浅谈少儿编程/">浅谈少儿编程</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/03/09/感-《终身幼儿园》/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="感-《终身幼儿园》">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-09T09:39:28.000Z">2020-03-09</time></div>
                    <a href="/2020/03/09/感-《终身幼儿园》/" class="has-link-black-ter is-size-6">感-《终身幼儿园》</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/浅谈少儿编程/">浅谈少儿编程</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/24/关于爬虫的几种常见的反爬/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="关于爬虫的几种常见的反爬">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-24T11:29:19.000Z">2019-12-24</time></div>
                    <a href="/2019/12/24/关于爬虫的几种常见的反爬/" class="has-link-black-ter is-size-6">关于爬虫的几种常见的反爬</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/爬虫/">爬虫</a> / <a class="has-link-grey -link" href="/categories/爬虫/反爬/">反爬</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/01/少儿编程教研/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="少儿编程教研必备">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-01T15:28:59.000Z">2019-12-01</time></div>
                    <a href="/2019/12/01/少儿编程教研/" class="has-link-black-ter is-size-6">少儿编程教研必备</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/浅谈少儿编程/">浅谈少儿编程</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Bug/" style="font-size: 12px;">Bug</a> <a href="/tags/Django/" style="font-size: 12px;">Django</a> <a href="/tags/Excel/" style="font-size: 14px;">Excel</a> <a href="/tags/MongoDB数据库/" style="font-size: 10px;">MongoDB数据库</a> <a href="/tags/docker/" style="font-size: 14px;">docker</a> <a href="/tags/mysql/" style="font-size: 14px;">mysql</a> <a href="/tags/mysql-ubuntu/" style="font-size: 10px;">mysql+ubuntu</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/python，反爬/" style="font-size: 10px;">python，反爬</a> <a href="/tags/scrapy/" style="font-size: 16px;">scrapy</a> <a href="/tags/scrapy-1-快速入门/" style="font-size: 10px;">scrapy-1-快速入门</a> <a href="/tags/scrapy-2-数据解析/" style="font-size: 10px;">scrapy-2-数据解析</a> <a href="/tags/scrapy-3-数据处理/" style="font-size: 10px;">scrapy-3-数据处理</a> <a href="/tags/scrapy-4-链接提取器/" style="font-size: 10px;">scrapy-4-链接提取器</a> <a href="/tags/scrapy-5-文件图片下载/" style="font-size: 10px;">scrapy-5-文件图片下载</a> <a href="/tags/selenium/" style="font-size: 10px;">selenium</a> <a href="/tags/浅谈少儿编程/" style="font-size: 16px;">浅谈少儿编程</a> <a href="/tags/爬虫/" style="font-size: 18px;">爬虫</a> <a href="/tags/爬虫-selenium/" style="font-size: 10px;">爬虫+selenium</a> <a href="/tags/环境配置/" style="font-size: 14px;">环境配置</a> <a href="/tags/短信与邮件服务/" style="font-size: 10px;">短信与邮件服务</a> <a href="/tags/部署/" style="font-size: 10px;">部署</a>
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2021/05/">
                <span class="level-start">
                    <span class="level-item">五月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2021/04/">
                <span class="level-start">
                    <span class="level-item">四月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">三月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">十月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">八月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">九月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">八月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">六月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">五月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">四月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">三月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">五月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Bug/">
                        <span class="tag">Bug</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Django/">
                        <span class="tag">Django</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Excel/">
                        <span class="tag">Excel</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MongoDB数据库/">
                        <span class="tag">MongoDB数据库</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/docker/">
                        <span class="tag">docker</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/mysql/">
                        <span class="tag">mysql</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/mysql-ubuntu/">
                        <span class="tag">mysql+ubuntu</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python/">
                        <span class="tag">python</span>
                        <span class="tag is-grey">16</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python，反爬/">
                        <span class="tag">python，反爬</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy/">
                        <span class="tag">scrapy</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy-1-快速入门/">
                        <span class="tag">scrapy-1-快速入门</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy-2-数据解析/">
                        <span class="tag">scrapy-2-数据解析</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy-3-数据处理/">
                        <span class="tag">scrapy-3-数据处理</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy-4-链接提取器/">
                        <span class="tag">scrapy-4-链接提取器</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy-5-文件图片下载/">
                        <span class="tag">scrapy-5-文件图片下载</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/selenium/">
                        <span class="tag">selenium</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/浅谈少儿编程/">
                        <span class="tag">浅谈少儿编程</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/爬虫/">
                        <span class="tag">爬虫</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/爬虫-selenium/">
                        <span class="tag">爬虫+selenium</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/环境配置/">
                        <span class="tag">环境配置</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/短信与邮件服务/">
                        <span class="tag">短信与邮件服务</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/部署/">
                        <span class="tag">部署</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
            

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://www.jianshu.com/u/bf4c0b4a8c83" target="_blank">
                    <span class="level-left">
                        <span class="level-item">简书</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.jianshu.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/junconec" target="_blank">
                    <span class="level-left">
                        <span class="level-item">GitHub</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Bug/" style="font-size: 12px;">Bug</a> <a href="/tags/Django/" style="font-size: 12px;">Django</a> <a href="/tags/Excel/" style="font-size: 14px;">Excel</a> <a href="/tags/MongoDB数据库/" style="font-size: 10px;">MongoDB数据库</a> <a href="/tags/docker/" style="font-size: 14px;">docker</a> <a href="/tags/mysql/" style="font-size: 14px;">mysql</a> <a href="/tags/mysql-ubuntu/" style="font-size: 10px;">mysql+ubuntu</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/python，反爬/" style="font-size: 10px;">python，反爬</a> <a href="/tags/scrapy/" style="font-size: 16px;">scrapy</a> <a href="/tags/scrapy-1-快速入门/" style="font-size: 10px;">scrapy-1-快速入门</a> <a href="/tags/scrapy-2-数据解析/" style="font-size: 10px;">scrapy-2-数据解析</a> <a href="/tags/scrapy-3-数据处理/" style="font-size: 10px;">scrapy-3-数据处理</a> <a href="/tags/scrapy-4-链接提取器/" style="font-size: 10px;">scrapy-4-链接提取器</a> <a href="/tags/scrapy-5-文件图片下载/" style="font-size: 10px;">scrapy-5-文件图片下载</a> <a href="/tags/selenium/" style="font-size: 10px;">selenium</a> <a href="/tags/浅谈少儿编程/" style="font-size: 16px;">浅谈少儿编程</a> <a href="/tags/爬虫/" style="font-size: 18px;">爬虫</a> <a href="/tags/爬虫-selenium/" style="font-size: 10px;">爬虫+selenium</a> <a href="/tags/环境配置/" style="font-size: 14px;">环境配置</a> <a href="/tags/短信与邮件服务/" style="font-size: 10px;">短信与邮件服务</a> <a href="/tags/部署/" style="font-size: 10px;">部署</a>
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2021/05/">
                <span class="level-start">
                    <span class="level-item">五月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2021/04/">
                <span class="level-start">
                    <span class="level-item">四月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">三月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">十月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">八月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">九月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">八月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">六月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">五月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">四月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">三月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">五月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Bug/">
                        <span class="tag">Bug</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Django/">
                        <span class="tag">Django</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Excel/">
                        <span class="tag">Excel</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MongoDB数据库/">
                        <span class="tag">MongoDB数据库</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/docker/">
                        <span class="tag">docker</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/mysql/">
                        <span class="tag">mysql</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/mysql-ubuntu/">
                        <span class="tag">mysql+ubuntu</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python/">
                        <span class="tag">python</span>
                        <span class="tag is-grey">16</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python，反爬/">
                        <span class="tag">python，反爬</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy/">
                        <span class="tag">scrapy</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy-1-快速入门/">
                        <span class="tag">scrapy-1-快速入门</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy-2-数据解析/">
                        <span class="tag">scrapy-2-数据解析</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy-3-数据处理/">
                        <span class="tag">scrapy-3-数据处理</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy-4-链接提取器/">
                        <span class="tag">scrapy-4-链接提取器</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/scrapy-5-文件图片下载/">
                        <span class="tag">scrapy-5-文件图片下载</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/selenium/">
                        <span class="tag">selenium</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/浅谈少儿编程/">
                        <span class="tag">浅谈少儿编程</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/爬虫/">
                        <span class="tag">爬虫</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/爬虫-selenium/">
                        <span class="tag">爬虫+selenium</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/环境配置/">
                        <span class="tag">环境配置</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/短信与邮件服务/">
                        <span class="tag">短信与邮件服务</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/部署/">
                        <span class="tag">部署</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://www.jianshu.com/u/bf4c0b4a8c83" target="_blank">
                    <span class="level-left">
                        <span class="level-item">简书</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.jianshu.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/junconec" target="_blank">
                    <span class="level-left">
                        <span class="level-item">GitHub</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="JUNCON个人博客" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2021 Juncon&nbsp;
                Powered &#10084; YH · Lin
                </p>
            </div>
            
            <script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

            
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/jiaxiaochu/jiaxiaochu.github.io">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        <div align="center">
            <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
            <script>
                var now = new Date(); 
                function createtime() { 
                    var grt= new Date("4/1/2019 12:49:00");//此处修改你的建站时间或者网站上线时间 
                    now.setTime(now.getTime()+250); 
                    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                    document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
                    document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
                } 
            setInterval("createtime()",250);
            </script>
            <div align="center">
            <span id="busuanzi_container_site_pv" class="theme-info">本站总访问量-<span id="busuanzi_value_site_pv"></span>-次|
              </span>
              <span id="busuanzi_container_site_uv" class="theme-info">您是第-<span id="busuanzi_value_site_uv"></span>-位小伙伴</span>

            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            </div>
        </div>
        <span>
        <script type="text/javascript" src="//rf.revolvermaps.com/0/0/0.js?i=0xetp0d4rdh&amp;d=2&amp;p=1&amp;b=8&amp;w=193&amp;g=2&amp;f=arial&amp;fs=12&amp;r=0&amp;c0=000000&amp;c1=00a99d&amp;c2=000000&amp;ic0=0&amp;ic1=0" async="async"></script>
        </span>
        </div>

    </div>

    <script>
        (function(){
            var bp = document.createElement('script');
            bp.src = '//push.zhanzhang.baidu.com/push.js';
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
</script>
<script src="https://cdn.jsdelivr.net/npm/meting@1.1.0/dist/Meting.min.js"></script>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
        <!-- 雪花特效 -->
    <script type="text/javascript">
      var windowWidth = $(window).width();
      if (windowWidth > 480) {
        document.write('<script type="text/javascript" src="/js/src/snow.js"><\/script>');
      }
    </script>

    <script src="//code.tidio.co/wgmwb2zlxrcti0crizzmumshwbxpums2.js"></script>
    
</body>
</html>